<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="mobile-web-app-capable" content="yes">
    <title>H√¥tel Les R√©sidences du Lawmar - Administration H√¥teli√®re</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- jsPDF -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <!-- html2canvas -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <!-- SheetJS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        /* ===== STYLES COMPLETS ===== */
        :root {
            --primary-color: #025ba5;
            --primary-dark: #014080;
            --primary-light: #e6f0fa;
            --secondary-color: #1E3A5F;
            --secondary-dark: #0D2848;
            --village-sand: #C19A6B;
            --village-terracotta: #A0522D;
            --restaurant-color: #e67e22;
            --restaurant-light: #fff1e6;
            --light-color: #FFF9E6;
            --text-color: #2C3E50;
            --text-light: #5D6D7E;
            --border-radius: 8px;
            --box-shadow: 0 5px 15px rgba(2, 91, 165, 0.15);
            --transition: all 0.3s ease;
            --sidebar-width: 280px;
            --whatsapp-color: #25D366;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Poppins', sans-serif;
            color: var(--text-color);
            line-height: 1.6;
            background-color: #F8F9FA;
        }

        /* ===== LOGIN ===== */
        #loginOverlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--secondary-dark) 0%, var(--secondary-color) 100%);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-card {
            background: rgba(255, 255, 255, 0.98);
            border-radius: 20px;
            padding: 40px 35px;
            width: 100%;
            max-width: 420px;
            box-shadow: 0 25px 75px rgba(0, 0, 0, 0.25);
            border: 2px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }

        .login-card::before {
            content: "üè®";
            position: absolute;
            top: -20px;
            right: -20px;
            font-size: 120px;
            opacity: 0.05;
            transform: rotate(15deg);
        }

        .login-header { text-align: center; margin-bottom: 35px; }
        .login-logo {
            width: 100px; height: 100px;
            margin: 0 auto 20px;
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: white;
            border: 3px solid var(--village-sand);
        }
        .login-title {
            font-family: 'Playfair Display', serif;
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 5px;
            line-height: 1.2;
        }
        .login-subtitle { color: var(--primary-dark); font-weight: 600; font-size: 0.95rem; }
        .village-badge {
            background: var(--primary-color);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            display: inline-block;
            margin-top: 8px;
        }

        /* ===== SIDEBAR ===== */
        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: var(--sidebar-width);
            height: 100vh;
            background: linear-gradient(180deg, var(--secondary-color) 0%, var(--secondary-dark) 100%);
            color: white;
            z-index: 1000;
            border-right: 3px solid var(--primary-color);
            transition: transform 0.3s ease;
            overflow-y: auto;
            display: none;
        }
        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 2px solid rgba(2, 91, 165, 0.3);
            background: rgba(2, 91, 165, 0.1);
        }
        .hotel-logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
            font-weight: 700;
            color: white;
        }
        .hotel-logo i { color: var(--primary-color); font-size: 1.8rem; }
        .village-tag {
            background: var(--primary-color);
            color: white;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
            font-weight: 600;
            margin-left: 5px;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-top: 20px;
            padding: 15px;
            background: rgba(2, 91, 165, 0.1);
            border-radius: 10px;
            border-left: 3px solid var(--primary-color);
        }
        .sidebar-menu { padding: 20px 0; height: calc(100vh - 200px); overflow-y: auto; }
        .nav-link {
            color: rgba(255, 255, 255, 0.85);
            padding: 12px 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            transition: var(--transition);
            border-left: 3px solid transparent;
            text-decoration: none;
        }
        .nav-link:hover, .nav-link.active {
            background: rgba(2, 91, 165, 0.15);
            color: white;
            border-left-color: var(--primary-color);
        }
        .badge-notification {
            background: var(--primary-color);
            color: white;
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 10px;
            margin-left: auto;
            font-weight: 600;
        }

        /* ===== MAIN CONTENT ===== */
        .main-content {
            margin-left: var(--sidebar-width);
            padding: 1.5rem;
            min-height: 100vh;
            display: none;
            transition: margin-left 0.3s ease;
        }

        /* ===== TOP NAVBAR ===== */
        .top-navbar {
            background: white;
            box-shadow: 0 2px 15px rgba(2, 91, 165, 0.1);
            padding: 0 25px;
            height: 70px;
            position: fixed;
            top: 0;
            right: 0;
            left: var(--sidebar-width);
            z-index: 999;
            border-bottom: 3px solid var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .nav-tools { display: flex; align-items: center; gap: 20px; }
        .search-box { position: relative; }
        .search-box input {
            padding: 8px 15px 8px 40px;
            border: 1px solid #ddd;
            border-radius: 20px;
            width: 280px;
            background: #f8f9fa;
            transition: var(--transition);
        }
        .search-box input:focus {
            width: 320px;
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(2, 91, 165, 0.1);
        }
        .search-box i {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--primary-color);
        }

        /* ===== SECTIONS ===== */
        .section-content { display: none; padding-top: 80px; animation: fadeIn 0.5s ease; }
        .section-content.active { display: block; }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ===== STATISTIQUES ===== */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(2, 91, 165, 0.2);
            transition: var(--transition);
            border-top: 4px solid var(--primary-color);
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 12px 25px rgba(2, 91, 165, 0.2);
        }
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--secondary-color);
            line-height: 1.2;
        }
        .stat-label { color: var(--text-light); font-size: 0.9rem; }

        /* ===== CARTES ===== */
        .reservation-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: var(--box-shadow);
            border: 1px solid rgba(2, 91, 165, 0.2);
            border-left: 4px solid var(--primary-color);
        }
        
        .restaurant-card {
            border-left: 4px solid var(--restaurant-color);
        }

        /* ===== BADGES STATUT ===== */
        .status-badge {
            display: inline-block;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        .status-pending { background: #fff3cd; color: #856404; border-left: 3px solid #ffc107; }
        .status-confirmed { background: #d4edda; color: #155724; border-left: 3px solid #28a745; }
        .status-checkedin { background: #cce5ff; color: #004085; border-left: 3px solid #0066cc; }
        .status-checkedout { background: #e2e3e5; color: #383d41; border-left: 3px solid #6c757d; }
        .status-cancelled { background: #f8d7da; color: #721c24; border-left: 3px solid #dc3545; }
        .status-paid { background: #d4edda; color: #155724; border-left: 3px solid #28a745; }
        .status-preparing { background: #fff3cd; color: #856404; border-left: 3px solid #e67e22; }
        .status-ready { background: #cce5ff; color: #004085; border-left: 3px solid #17a2b8; }
        .status-delivered { background: #d4edda; color: #155724; border-left: 3px solid #28a745; }

        /* ===== BOUTONS D'ACTION ===== */
        .action-group { display: flex; gap: 6px; flex-wrap: wrap; }
        .btn-action {
            width: 34px; height: 34px;
            border-radius: 6px;
            border: none;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            color: white;
            font-size: 0.9rem;
        }
        .btn-action:hover { transform: translateY(-2px); }
        .btn-view { background: #17a2b8; }
        .btn-edit { background: var(--secondary-color); }
        .btn-status { background: #ffc107; color: #000; }
        .btn-invoice { background: var(--primary-color); color: white; }
        .btn-delete { background: #dc3545; }
        .btn-download { background: #28a745; }
        .btn-whatsapp { background: var(--whatsapp-color); color: white; }
        .btn-sync { background: #6c5ce7; color: white; }
        .btn-demo { background: #e17055; color: white; }
        .btn-restaurant { background: var(--restaurant-color); color: white; }

        /* ===== FACTURE ===== */
        .invoice-lawmar {
            max-width: 900px;
            margin: 0 auto;
            background: white;
            padding: 35px;
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
            border: 1px solid var(--primary-color);
            position: relative;
            overflow: hidden;
        }
        .invoice-lawmar::before {
            content: "üè® H√îTEL LES R√âSIDENCES DU LAWMAR üè®";
            position: absolute;
            top: 30px;
            right: 30px;
            font-size: 14px;
            color: rgba(2, 91, 165, 0.08);
            font-weight: 700;
            transform: rotate(15deg);
            white-space: nowrap;
        }
        .invoice-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid var(--primary-color);
        }
        .invoice-company { flex: 1; }
        .invoice-company-name {
            font-size: 26px;
            font-weight: 700;
            color: var(--secondary-color);
            margin-bottom: 10px;
        }
        .invoice-company-name span { color: var(--primary-color); }
        .invoice-company-details {
            font-size: 11px;
            color: var(--text-light);
            line-height: 1.6;
        }
        .invoice-company-details i { color: var(--primary-color); width: 18px; }
        .invoice-title-section { text-align: right; }
        .invoice-title {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary-color);
            margin-bottom: 10px;
        }
        .invoice-number {
            background: var(--secondary-color);
            color: white;
            padding: 8px 18px;
            border-radius: 30px;
            font-size: 13px;
            display: inline-block;
        }
        .invoice-client-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            border-left: 4px solid var(--primary-color);
        }
        .invoice-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        .invoice-table th {
            background: var(--primary-color);
            color: white;
            padding: 12px;
            font-size: 12px;
            text-align: left;
        }
        .invoice-table td {
            padding: 12px;
            border-bottom: 1px solid #eee;
            font-size: 12px;
        }
        .invoice-table tfoot tr { background: #f8f9fa; }
        .invoice-stamp {
            display: inline-block;
            padding: 12px 35px;
            border: 2px solid var(--primary-color);
            border-radius: 50px;
            transform: rotate(-3deg);
            background: rgba(2, 91, 165, 0.05);
            font-weight: 700;
            color: var(--secondary-color);
            font-size: 14px;
        }
        .invoice-footer {
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            font-size: 10px;
            color: #999;
            text-align: center;
        }

        /* ===== FILTRES ===== */
        .filters-section {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            border: 1px solid rgba(2, 91, 165, 0.3);
        }

        /* ===== PAGINATION ===== */
        .pagination-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 20px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            box-shadow: var(--box-shadow);
        }
        .pagination .page-link { color: var(--primary-color); }
        .pagination .active .page-link {
            background: var(--primary-color);
            border-color: var(--primary-color);
            color: white;
        }

        /* ===== ALERTS ===== */
        .alert-container {
            position: fixed;
            top: 80px;
            right: 30px;
            z-index: 9999;
            max-width: 350px;
        }

        /* ===== LOADING ===== */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(255, 255, 255, 0.95);
            z-index: 10000;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
        }
        .loading-overlay.active { display: flex; }
        .spinner {
            width: 50px; height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid var(--primary-color);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* ===== HISTORIQUE ===== */
        .status-history {
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        .status-history-item {
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 12px;
        }
        .status-history-item:last-child { border-bottom: none; }

        /* ===== CALENDRIER AM√âLIOR√â ===== */
        .calendar-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: var(--box-shadow);
        }
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--primary-color);
        }
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        .calendar-weekday {
            text-align: center;
            font-weight: 600;
            color: var(--primary-color);
            padding: 10px;
            background: var(--primary-light);
            border-radius: 6px;
        }
        .calendar-day {
            min-height: 100px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e0e0e0;
            transition: var(--transition);
            cursor: pointer;
        }
        .calendar-day:hover {
            transform: translateY(-2px);
            box-shadow: var(--box-shadow);
            border-color: var(--primary-color);
        }
        .calendar-day.today {
            background: var(--primary-light);
            border: 2px solid var(--primary-color);
        }
        .calendar-day .day-number {
            font-weight: 600;
            color: var(--secondary-color);
            margin-bottom: 8px;
        }
        .calendar-event {
            font-size: 0.7rem;
            padding: 2px 4px;
            margin-top: 2px;
            border-radius: 3px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .calendar-event.arrival {
            background: #d4edda;
            color: #155724;
        }
        .calendar-event.departure {
            background: #f8d7da;
            color: #721c24;
        }
        .calendar-event.restaurant {
            background: var(--restaurant-light);
            color: var(--restaurant-color);
        }

        /* ===== TABLEAUX AM√âLIOR√âS ===== */
        .table-actions-cell {
            min-width: 120px;
        }
        .items-preview {
            max-height: 60px;
            overflow-y: auto;
            font-size: 0.75rem;
        }
        .items-preview div {
            padding: 2px 0;
            border-bottom: 1px dashed #eee;
        }
        .items-preview div:last-child {
            border-bottom: none;
        }

        /* ===== FILTRES AM√âLIOR√âS ===== */
        .filter-group {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            align-items: flex-end;
        }
        .filter-group .form-group {
            flex: 1;
            min-width: 150px;
        }

        /* ===== STATISTIQUES AM√âLIOR√âES ===== */
        .stats-subtitle {
            font-size: 0.75rem;
            color: var(--text-light);
            margin-top: 5px;
        }
        .trend-up {
            color: #28a745;
            font-size: 0.75rem;
        }
        .trend-down {
            color: #dc3545;
            font-size: 0.75rem;
        }

        /* ===== RESPONSIVE ===== */
        @media (max-width: 992px) {
            .sidebar { transform: translateX(-100%); }
            .sidebar.active { transform: translateX(0); }
            .main-content { margin-left: 0; }
            .top-navbar { left: 0; }
            .search-box input { width: 200px; }
            .calendar-grid {
                grid-template-columns: repeat(7, 1fr);
                font-size: 0.8rem;
            }
            .calendar-day {
                min-height: 60px;
                padding: 5px;
            }
        }
        @media (max-width: 768px) {
            .stats-grid { grid-template-columns: 1fr; }
            .invoice-header { flex-direction: column; text-align: center; }
            .invoice-title-section { text-align: center; margin-top: 20px; }
            .action-group { justify-content: center; }
            .pagination-container { flex-direction: column; gap: 10px; }
            .calendar-weekday { display: none; }
            .calendar-grid { grid-template-columns: repeat(7, 1fr); gap: 2px; }
            .calendar-day { min-height: 40px; padding: 3px; }
            .calendar-day .day-number { font-size: 0.7rem; }
            .calendar-event { display: none; }
        }

        /* ===== UTILITAIRES ===== */
        .currency-fcfa { font-weight: 700; color: var(--secondary-color); }
        .badge-vip {
            background: linear-gradient(45deg, #D4AF37, #FFD700);
            color: #000;
            font-weight: 600;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 0.7rem;
        }
        .hotel-watermark {
            position: absolute;
            opacity: 0.03;
            font-size: 100px;
            transform: rotate(-20deg);
            bottom: 50px;
            right: 30px;
            color: var(--primary-color);
            font-weight: 800;
            pointer-events: none;
        }
        .btn-village {
            background: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 8px;
            font-weight: 600;
            transition: var(--transition);
        }
        .btn-village:hover {
            background: var(--primary-dark);
            color: white;
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <!-- LOADING OVERLAY -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="spinner"></div>
        <p style="color: var(--secondary-color);">H√¥tel Les R√©sidences du Lawmar - Chargement...</p>
    </div>

    <!-- LOGIN PAGE -->
    <div id="loginOverlay">
        <div class="login-card">
            <div class="login-header">
                <div class="login-logo">
                    <i class="fas fa-hotel"></i>
                </div>
                <h1 class="login-title">LES R√âSIDENCES<br>DU LAWMAR</h1>
                <div class="village-badge">H√¥tel & R√©sidences</div>
                <p class="login-subtitle mt-3">Administration & Gestion</p>
            </div>

            <div class="alert alert-danger" id="loginError" style="display: none;"></div>

            <form id="loginForm">
                <div class="mb-4">
                    <label class="form-label fw-semibold">
                        <i class="fas fa-user me-2" style="color: var(--primary-color);"></i>
                        Nom d'utilisateur
                    </label>
                    <input type="text" class="form-control form-control-lg" id="username" 
                           placeholder="admin" required autocomplete="username">
                </div>
                <div class="mb-4">
                    <label class="form-label fw-semibold">
                        <i class="fas fa-lock me-2" style="color: var(--primary-color);"></i>
                        Mot de passe
                    </label>
                    <div class="input-group">
                        <input type="password" class="form-control form-control-lg" id="password" 
                               placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required autocomplete="current-password">
                        <button class="btn btn-outline-secondary" type="button" id="togglePassword">
                            <i class="fas fa-eye"></i>
                        </button>
                    </div>
                </div>

                <button type="submit" class="btn btn-village w-100 py-3 fw-semibold" id="loginBtn">
                    <i class="fas fa-sign-in-alt me-2"></i>
                    Acc√©der au tableau de bord
                </button>

                <div class="text-center mt-4 pt-3 border-top">
                    <small class="text-muted">
                        <i class="fas fa-map-pin me-1"></i>
                        Ndi√©b√®ne Gandiol, Saint-Louis, S√©n√©gal
                    </small>
                </div>
            </form>
        </div>
    </div>

    <!-- DASHBOARD PRINCIPAL -->
    <div id="dashboardPage" style="display: none;">
        <!-- SIDEBAR -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="hotel-logo">
                    <i class="fas fa-hotel"></i>
                    <div>
                        <div>H√îTEL</div>
                        <div style="font-size: 1.2rem; color: var(--primary-color);">LES R√âSIDENCES DU LAWMAR</div>
                    </div>
                </div>
                <div class="user-info">
                    <div style="width: 45px; height: 45px; background: var(--primary-color); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                        <i class="fas fa-user-tie" style="color: white; font-size: 1.3rem;"></i>
                    </div>
                    <div>
                        <div style="font-weight: 600; font-size: 0.95rem;" id="userName">Administrateur</div>
                        <div style="font-size: 0.75rem; opacity: 0.9;" id="userRole">Direction</div>
                    </div>
                </div>
            </div>
            
            <div class="sidebar-menu">
                <nav>
                    <a href="#" class="nav-link active" data-section="dashboard">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Tableau de bord</span>
                    </a>
                    <a href="#" class="nav-link" data-section="reservations">
                        <i class="fas fa-calendar-check"></i>
                        <span>R√©servations H√¥tel</span>
                        <span class="badge-notification" id="reservation-badge">0</span>
                    </a>
                    <a href="#" class="nav-link" data-section="restaurant">
                        <i class="fas fa-utensils"></i>
                        <span>Commandes Restaurant</span>
                        <span class="badge-notification" id="restaurant-badge">0</span>
                    </a>
                    <a href="#" class="nav-link" data-section="clients">
                        <i class="fas fa-users"></i>
                        <span>Clients</span>
                    </a>
                    <a href="#" class="nav-link" data-section="hebergements">
                        <i class="fas fa-bed"></i>
                        <span>H√©bergements</span>
                    </a>
                    <a href="#" class="nav-link" data-section="factures">
                        <i class="fas fa-file-invoice"></i>
                        <span>Factures</span>
                        <span class="badge-notification" id="invoice-badge">0</span>
                    </a>
                    <a href="#" class="nav-link" data-section="calendrier">
                        <i class="fas fa-calendar"></i>
                        <span>Calendrier</span>
                    </a>
                    <a href="#" class="nav-link" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        <span>D√©connexion</span>
                    </a>
                </nav>

                <!-- COORDONN√âES H√îTEL -->
                <div style="padding: 20px; margin-top: 20px; border-top: 1px solid rgba(2,91,165,0.3);">
                    <small style="color: var(--primary-color); font-weight: 600;">
                        <i class="fas fa-info-circle me-1"></i> H√îTEL LES R√âSIDENCES DU LAWMAR
                    </small>
                    <div style="font-size: 0.7rem; margin-top: 12px; opacity: 0.9; line-height: 1.7;">
                        <i class="fas fa-map-marker-alt me-1" style="color: var(--primary-color);"></i> 
                        Commune de Ndi√©b√®ne Gandiol<br>
                        <i class="fas fa-id-card me-1" style="color: var(--primary-color);"></i> 
                        RC: SN-STL-20217-B-1703<br>
                        <i class="fas fa-file-signature me-1" style="color: var(--primary-color);"></i> 
                        NINEA: 006522032<br>
                        <i class="fas fa-envelope me-1" style="color: var(--primary-color);"></i> 
                        residencelawmar@gmail.com<br>
                        <i class="fas fa-envelope me-1" style="color: var(--primary-color);"></i> 
                        diopelhadji11@gmail.com<br>
                        <i class="fas fa-phone me-1" style="color: var(--primary-color);"></i> 
                        +221 77 995 20 20<br>
                        <i class="fas fa-phone me-1" style="color: var(--primary-color);"></i> 
                        +221 77 291 72 15
                    </div>
                </div>
            </div>
        </aside>

        <!-- MAIN CONTENT -->
        <main class="main-content" id="mainContent">
            <!-- TOP NAVBAR -->
            <header class="top-navbar">
                <button class="btn btn-light d-lg-none" id="sidebarToggle">
                    <i class="fas fa-bars"></i>
                </button>
                
                <h5 style="margin: 0; color: var(--secondary-color);" id="current-section">
                    <i class="fas fa-tachometer-alt me-2" style="color: var(--primary-color);"></i>
                    Tableau de bord - H√¥tel Les R√©sidences du Lawmar
                </h5>
                
                <div class="nav-tools">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="globalSearch" placeholder="Rechercher...">
                    </div>
                    
                    <div class="dropdown">
                        <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                            <i class="fas fa-user-circle me-1"></i>
                            <span id="navbar-username">Admin</span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li><a class="dropdown-item" href="#" onclick="showChangePasswordModal()">
                                <i class="fas fa-key me-2"></i>Changer mot de passe
                            </a></li>
                            <li><hr class="dropdown-divider"></li>
                            <li><a class="dropdown-item text-danger" href="#" onclick="logout()">
                                <i class="fas fa-sign-out-alt me-2"></i>D√©connexion
                            </a></li>
                        </ul>
                    </div>
                </div>
            </header>

            <!-- ALERT CONTAINER -->
            <div class="alert-container" id="alertContainer"></div>

            <!-- ==================== SECTION DASHBOARD ==================== -->
            <section class="section-content active" id="dashboard-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-number" id="todayArrivals">0</div>
                                <div class="stat-label">Arriv√©es aujourd'hui</div>
                            </div>
                            <i class="fas fa-sign-in-alt fa-2x" style="color: var(--primary-color); opacity: 0.5;"></i>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-number" id="occupancyRate">0%</div>
                                <div class="stat-label">Taux d'occupation</div>
                            </div>
                            <i class="fas fa-bed fa-2x" style="color: var(--primary-color); opacity: 0.5;"></i>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-number" id="pendingReservations">0</div>
                                <div class="stat-label">R√©servations en attente</div>
                            </div>
                            <i class="fas fa-clock fa-2x" style="color: var(--primary-color); opacity: 0.5;"></i>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="d-flex justify-content-between">
                            <div>
                                <div class="stat-number" id="monthlyRevenue">0</div>
                                <div class="stat-label">CA du mois (FCFA)</div>
                            </div>
                            <i class="fas fa-chart-line fa-2x" style="color: var(--primary-color); opacity: 0.5;"></i>
                        </div>
                    </div>
                </div>

                <div class="row">
                    <div class="col-lg-8">
                        <div class="reservation-card">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 style="color: var(--secondary-color);">
                                    <i class="fas fa-history me-2" style="color: var(--primary-color);"></i>
                                    Derni√®res r√©servations
                                </h5>
                                <button class="btn btn-sm btn-outline-primary" onclick="syncAllData()">
                                    <i class="fas fa-sync-alt me-1"></i> Synchroniser
                                </button>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead style="background: #f8f9fa;">
                                        <tr>
                                            <th>R√©f√©rence</th>
                                            <th>Client</th>
                                            <th>H√©bergement</th>
                                            <th>Dates</th>
                                            <th>Statut</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentReservations">
                                        <tr>
                                            <td colspan="6" class="text-center py-4 text-muted">
                                                <i class="fas fa-calendar-times fa-2x mb-2"></i><br>
                                                Aucune r√©servation r√©cente
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <div class="reservation-card restaurant-card mt-3">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <h5 style="color: var(--restaurant-color);">
                                    <i class="fas fa-utensils me-2"></i>
                                    Derni√®res commandes restaurant
                                </h5>
                                <a href="#" class="btn btn-sm btn-outline-warning" onclick="showSection('restaurant')">
                                    <i class="fas fa-external-link-alt me-1"></i> Voir tout
                                </a>
                            </div>
                            <div class="table-responsive">
                                <table class="table table-hover">
                                    <thead style="background: #f8f9fa;">
                                        <tr>
                                            <th>N¬∞ Commande</th>
                                            <th>Client</th>
                                            <th>Articles</th>
                                            <th>Total</th>
                                            <th>Statut</th>
                                            <th>Actions</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recentOrders">
                                        <tr>
                                            <td colspan="6" class="text-center py-4 text-muted">
                                                <i class="fas fa-utensils fa-2x mb-2"></i><br>
                                                Aucune commande r√©cente
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-lg-4">
                        <div class="reservation-card">
                            <h5 style="color: var(--secondary-color);">
                                <i class="fas fa-bell me-2" style="color: var(--primary-color);"></i>
                                Aujourd'hui
                            </h5>
                            <div id="todaySummary" class="mt-3">
                                <div class="d-flex justify-content-between mb-2">
                                    <span>üõèÔ∏è Arriv√©es:</span>
                                    <strong id="todayArrivalsCount">0</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>üß≥ D√©parts:</span>
                                    <strong id="todayDeparturesCount">0</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>üçΩÔ∏è Commandes restaurant:</span>
                                    <strong id="todayOrdersCount">0</strong>
                                </div>
                                <div class="d-flex justify-content-between mb-2">
                                    <span>üëë Clients VIP:</span>
                                    <strong><span class="badge-vip" id="todayVipCount">0</span></strong>
                                </div>
                                <hr>
                                <div class="d-flex justify-content-between">
                                    <span>üí∞ Recette du jour:</span>
                                    <strong class="currency-fcfa" id="dailyRevenue">0</strong>
                                </div>
                            </div>
                        </div>
                        
                        <div class="reservation-card">
                            <h5 style="color: var(--secondary-color);">
                                <i class="fas fa-phone-alt me-2" style="color: var(--primary-color);"></i>
                                Contact rapide
                            </h5>
                            <div class="d-grid gap-2 mt-3">
                                <a href="tel:+221779952020" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-phone me-2"></i>77 995 20 20
                                </a>
                                <a href="tel:+221772917215" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-phone me-2"></i>77 291 72 15
                                </a>
                                <a href="https://wa.me/221779952020" target="_blank" class="btn btn-whatsapp btn-sm">
                                    <i class="fab fa-whatsapp me-2"></i>WhatsApp 77 995 20 20
                                </a>
                                <a href="https://wa.me/221772917215" target="_blank" class="btn btn-whatsapp btn-sm">
                                    <i class="fab fa-whatsapp me-2"></i>WhatsApp 77 291 72 15
                                </a>
                                <a href="mailto:residencelawmar@gmail.com" class="btn btn-outline-primary btn-sm">
                                    <i class="fas fa-envelope me-2"></i>residencelawmar@gmail.com
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- ==================== SECTION R√âSERVATIONS H√îTEL ==================== -->
            <section class="section-content" id="reservations-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 style="color: var(--secondary-color);">
                        <i class="fas fa-calendar-check me-2" style="color: var(--primary-color);"></i>
                        R√©servations H√¥tel
                    </h4>
                    <div class="action-group">
                        <button class="btn btn-success" onclick="exportReservations()">
                            <i class="fas fa-file-excel me-2"></i>Exporter
                        </button>
                        <button class="btn btn-sync" onclick="syncAllData()" title="Synchroniser">
                            <i class="fas fa-sync-alt me-1"></i> Sync
                        </button>
                        <button class="btn btn-primary" onclick="openChambresPage()" title="Ouvrir chambres.html">
                            <i class="fas fa-external-link-alt me-1"></i> Chambres
                        </button>
                    </div>
                </div>

                <!-- FILTRES R√âSERVATIONS -->
                <div class="filters-section">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label fw-semibold">Date d'arriv√©e</label>
                            <input type="date" class="form-control" id="filterCheckin">
                        </div>
                        <div class="col-md-3">
                            <label class="form-label fw-semibold">Date de d√©part</label>
                            <input type="date" class="form-control" id="filterCheckout">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label fw-semibold">Statut</label>
                            <select class="form-control" id="filterStatus">
                                <option value="">Tous</option>
                                <option value="pending">En attente</option>
                                <option value="confirmed">Confirm√©e</option>
                                <option value="checked-in">Check-in</option>
                                <option value="checked-out">Check-out</option>
                                <option value="cancelled">Annul√©e</option>
                            </select>
                        </div>
                        <div class="col-md-2">
                            <label class="form-label fw-semibold">Client</label>
                            <input type="text" class="form-control" id="filterClient" placeholder="Nom / T√©l√©phone">
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <button class="btn btn-primary w-100" onclick="applyReservationFilters()">
                                <i class="fas fa-filter me-2"></i>Filtrer
                            </button>
                        </div>
                    </div>
                </div>

                <!-- STATISTIQUES R√âSERVATIONS -->
                <div id="reservationStatsContainer" class="mb-3">
                    <div class="row g-2">
                        <div class="col-md-2 col-6">
                            <div class="p-2 bg-light rounded text-center">
                                <small class="text-muted">Total</small>
                                <h6 class="mb-0" id="totalReservationsCount">0</h6>
                            </div>
                        </div>
                        <div class="col-md-2 col-6">
                            <div class="p-2 bg-warning bg-opacity-10 rounded text-center">
                                <small class="text-muted">En attente</small>
                                <h6 class="mb-0" id="pendingReservationsCount">0</h6>
                            </div>
                        </div>
                        <div class="col-md-2 col-6">
                            <div class="p-2 bg-success bg-opacity-10 rounded text-center">
                                <small class="text-muted">Confirm√©es</small>
                                <h6 class="mb-0" id="confirmedReservationsCount">0</h6>
                            </div>
                        </div>
                        <div class="col-md-2 col-6">
                            <div class="p-2 bg-info bg-opacity-10 rounded text-center">
                                <small class="text-muted">Check-in</small>
                                <h6 class="mb-0" id="checkedinReservationsCount">0</h6>
                            </div>
                        </div>
                        <div class="col-md-4 col-12">
                            <div class="p-2 bg-primary bg-opacity-10 rounded text-center">
                                <small class="text-muted">Aujourd'hui</small>
                                <h6 class="mb-0" id="todayReservationsCount">0 arriv√©e(s)</h6>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- TABLEAU R√âSERVATIONS -->
                <div class="table-responsive">
                    <table class="table table-hover align-middle" style="background: white; border-radius: 10px;">
                        <thead style="background: var(--secondary-color); color: white;">
                            <tr>
                                <th>R√©f√©rence</th>
                                <th>Client</th>
                                <th>H√©bergement</th>
                                <th>Arriv√©e</th>
                                <th>D√©part</th>
                                <th>Nuits</th>
                                <th>Montant</th>
                                <th>Statut</th>
                                <th>Source</th>
                                <th class="text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="reservationsTableBody">
                            <tr>
                                <td colspan="10" class="text-center py-5">
                                    <i class="fas fa-calendar-times" style="font-size: 3rem; color: #dee2e6;"></i>
                                    <h6 class="mt-3 text-muted">Aucune r√©servation</h6>
                                    <p class="small text-muted">Synchronisez avec chambres.html pour voir les r√©servations</p>
                                    <button class="btn btn-sm btn-primary" onclick="syncAllData()">
                                        <i class="fas fa-sync-alt me-1"></i> Synchroniser
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="reservationsPagination" class="pagination-container">
                    <nav aria-label="Pagination"><ul class="pagination mb-0"></ul></nav>
                    <div class="text-muted">0 √©l√©ment(s)</div>
                </div>
            </section>

            <!-- ==================== SECTION RESTAURANT ==================== -->
            <section class="section-content" id="restaurant-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 style="color: var(--restaurant-color);">
                        <i class="fas fa-utensils me-2"></i>
                        Commandes Restaurant
                    </h4>
                    <div class="action-group">
                        <button class="btn btn-success" onclick="exportRestaurantOrders()">
                            <i class="fas fa-file-excel me-2"></i>Exporter
                        </button>
                        <button class="btn btn-sync" onclick="syncAllData()">
                            <i class="fas fa-sync-alt me-1"></i> Synchroniser
                        </button>
                        <button class="btn" style="background: var(--restaurant-color); color: white;" onclick="openRestaurantPage()">
                            <i class="fas fa-external-link-alt me-2"></i>Restaurant
                        </button>
                    </div>
                </div>

                <!-- FILTRES RESTAURANT -->
                <div class="filters-section">
                    <div class="row g-3">
                        <div class="col-md-3">
                            <label class="form-label fw-semibold">Date</label>
                            <input type="date" class="form-control" id="filterOrderDate">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label fw-semibold">Statut</label>
                            <select class="form-control" id="filterOrderStatus">
                                <option value="">Tous</option>
                                <option value="pending">En attente</option>
                                <option value="preparing">En pr√©paration</option>
                                <option value="ready">Pr√™t</option>
                                <option value="delivered">Servi</option>
                                <option value="cancelled">Annul√©</option>
                            </select>
                        </div>
                        <div class="col-md-3">
                            <label class="form-label fw-semibold">Client / Table</label>
                            <input type="text" class="form-control" id="filterOrderClient" placeholder="Nom ou n¬∞ table">
                        </div>
                        <div class="col-md-2">
                            <label class="form-label fw-semibold">Type</label>
                            <select class="form-control" id="filterOrderType">
                                <option value="">Tous</option>
                                <option value="table">Sur place</option>
                                <option value="room">Service en chambre</option>
                                <option value="takeaway">√Ä emporter</option>
                            </select>
                        </div>
                        <div class="col-md-2 d-flex align-items-end">
                            <button class="btn btn-primary w-100" onclick="applyOrderFilters()">
                                <i class="fas fa-filter me-2"></i>Filtrer
                            </button>
                        </div>
                    </div>
                </div>

                <!-- STATISTIQUES RESTAURANT -->
                <div class="row g-3 mb-4">
                    <div class="col-md-3">
                        <div class="p-3 bg-white rounded shadow-sm">
                            <small class="text-muted">Commandes aujourd'hui</small>
                            <h3 class="mb-0" id="todayOrdersStat">0</h3>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="p-3 bg-white rounded shadow-sm">
                            <small class="text-muted">En pr√©paration</small>
                            <h3 class="mb-0" id="preparingOrdersStat">0</h3>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="p-3 bg-white rounded shadow-sm">
                            <small class="text-muted">CA Restaurant (jour)</small>
                            <h3 class="mb-0 currency-fcfa" id="restaurantDailyRevenue">0</h3>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="p-3 bg-white rounded shadow-sm">
                            <small class="text-muted">CA Restaurant (mois)</small>
                            <h3 class="mb-0 currency-fcfa" id="restaurantMonthlyRevenue">0</h3>
                        </div>
                    </div>
                </div>

                <!-- TABLEAU COMMANDES -->
                <div class="table-responsive">
                    <table class="table table-hover align-middle" style="background: white; border-radius: 10px;">
                        <thead style="background: var(--restaurant-color); color: white;">
                            <tr>
                                <th>N¬∞ Commande</th>
                                <th>Date/Heure</th>
                                <th>Client / Table</th>
                                <th>Type</th>
                                <th>Articles</th>
                                <th>Total</th>
                                <th>Statut</th>
                                <th class="text-center">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="ordersTableBody">
                            <tr>
                                <td colspan="8" class="text-center py-5">
                                    <i class="fas fa-utensils" style="font-size: 3rem; color: #dee2e6;"></i>
                                    <h6 class="mt-3 text-muted">Aucune commande restaurant</h6>
                                    <p class="small text-muted">Synchronisez avec restauration.html pour voir les commandes</p>
                                    <button class="btn btn-sm" style="background: var(--restaurant-color); color: white;" onclick="syncAllData()">
                                        <i class="fas fa-sync-alt me-1"></i> Synchroniser
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div id="ordersPagination" class="pagination-container">
                    <nav aria-label="Pagination"><ul class="pagination mb-0"></ul></nav>
                    <div class="text-muted">0 commande(s)</div>
                </div>
            </section>

            <!-- ==================== SECTION CLIENTS ==================== -->
            <section class="section-content" id="clients-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 style="color: var(--secondary-color);">
                        <i class="fas fa-users me-2" style="color: var(--primary-color);"></i>
                        Gestion des clients
                    </h4>
                    <div class="action-group">
                        <button class="btn btn-success" onclick="exportClients()">
                            <i class="fas fa-file-excel me-2"></i>Exporter
                        </button>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover" style="background: white; border-radius: 10px;">
                        <thead style="background: var(--secondary-color); color: white;">
                            <tr>
                                <th>Nom & Pr√©nom</th>
                                <th>T√©l√©phone</th>
                                <th>Email</th>
                                <th>Nationalit√©</th>
                                <th>S√©jours</th>
                                <th>Total d√©pens√©</th>
                                <th>VIP</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="clientsTableBody">
                            <tr>
                                <td colspan="8" class="text-center py-5">
                                    <i class="fas fa-users" style="font-size: 3rem; color: #dee2e6;"></i>
                                    <h6 class="mt-3 text-muted">Aucun client</h6>
                                    <p class="small text-muted">Les clients seront ajout√©s automatiquement via les r√©servations et commandes</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ==================== SECTION H√âBERGEMENTS ==================== -->
            <section class="section-content" id="hebergements-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 style="color: var(--secondary-color);">
                        <i class="fas fa-bed me-2" style="color: var(--primary-color);"></i>
                        Parc h√©bergement
                    </h4>
                    <div>
                        <button class="btn btn-primary" onclick="openChambresPage()">
                            <i class="fas fa-external-link-alt me-2"></i>G√©rer les chambres
                        </button>
                    </div>
                </div>

                <div class="row" id="roomsGrid"></div>
            </section>

            <!-- ==================== SECTION FACTURES ==================== -->
            <section class="section-content" id="factures-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 style="color: var(--secondary-color);">
                        <i class="fas fa-file-invoice me-2" style="color: var(--primary-color);"></i>
                        Factures & Documents
                    </h4>
                </div>

                <div class="table-responsive">
                    <table class="table table-hover" style="background: white; border-radius: 10px;">
                        <thead style="background: var(--secondary-color); color: white;">
                            <tr>
                                <th>N¬∞ Facture</th>
                                <th>Client</th>
                                <th>Date</th>
                                <th>Description</th>
                                <th>Montant</th>
                                <th>Statut</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="invoicesTableBody">
                            <tr>
                                <td colspan="7" class="text-center py-5">
                                    <i class="fas fa-file-invoice" style="font-size: 3rem; color: #dee2e6;"></i>
                                    <h6 class="mt-3 text-muted">Aucune facture</h6>
                                    <p class="small text-muted">Les factures seront g√©n√©r√©es automatiquement</p>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <!-- ==================== SECTION CALENDRIER ==================== -->
            <section class="section-content" id="calendrier-section">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 style="color: var(--secondary-color);">
                        <i class="fas fa-calendar me-2" style="color: var(--primary-color);"></i>
                        Calendrier des r√©servations
                    </h4>
                    <div>
                        <button class="btn btn-outline-primary" onclick="prevMonth()">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                        <span id="currentMonth" style="margin: 0 15px; font-weight: 600;"></span>
                        <button class="btn btn-outline-primary" onclick="nextMonth()">
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
                <div id="calendarContainer" class="calendar-container"></div>
            </section>
        </main>
    </div>

    <!-- ==================== MODALS ==================== -->

    <!-- MODAL D√âTAILS R√âSERVATION -->
    <div class="modal fade" id="viewReservationModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--secondary-color); color: white;">
                    <h5 class="modal-title">
                        <i class="fas fa-info-circle me-2" style="color: var(--primary-color);"></i>
                        D√©tails de la r√©servation
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="viewReservationContent"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-status" onclick="showReservationStatusModal(currentViewReservationId)">Changer statut</button>
                    <button type="button" class="btn btn-primary" onclick="generateReservationInvoice(currentViewReservationId)">Facture</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CHANGEMENT STATUT - R√âSERVATION -->
    <div class="modal fade" id="statusReservationModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--primary-color);">
                    <h5 class="modal-title" style="color: white;">
                        <i class="fas fa-sync-alt me-2"></i>
                        Modifier le statut de la r√©servation
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="statusReservationId">
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Statut actuel</label>
                        <input type="text" class="form-control" id="currentStatusReservation" readonly>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Nouveau statut</label>
                        <select class="form-control" id="newStatusReservation">
                            <option value="pending">En attente</option>
                            <option value="confirmed">Confirm√©e</option>
                            <option value="checked-in">Check-in</option>
                            <option value="checked-out">Check-out</option>
                            <option value="cancelled">Annul√©e</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Commentaire (optionnel)</label>
                        <textarea class="form-control" id="statusReservationComment" rows="2" placeholder="Motif du changement..."></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-village" onclick="updateReservationStatus()">Mettre √† jour</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL D√âTAILS COMMANDE RESTAURANT -->
    <div class="modal fade" id="viewOrderModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--restaurant-color); color: white;">
                    <h5 class="modal-title">
                        <i class="fas fa-receipt me-2"></i>
                        D√©tails de la commande
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" id="viewOrderContent"></div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-status" onclick="showOrderStatusModal(currentViewOrderId)">Changer statut</button>
                    <button type="button" class="btn btn-primary" onclick="generateOrderInvoice(currentViewOrderId)">Facture</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CHANGEMENT STATUT COMMANDE -->
    <div class="modal fade" id="statusOrderModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--restaurant-color);">
                    <h5 class="modal-title" style="color: white;">
                        <i class="fas fa-sync-alt me-2"></i>
                        Modifier le statut de la commande
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <input type="hidden" id="statusOrderId">
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Statut actuel</label>
                        <input type="text" class="form-control" id="currentStatusOrder" readonly>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Nouveau statut</label>
                        <select class="form-control" id="newStatusOrder">
                            <option value="pending">En attente</option>
                            <option value="preparing">En pr√©paration</option>
                            <option value="ready">Pr√™t</option>
                            <option value="delivered">Servi</option>
                            <option value="cancelled">Annul√©</option>
                        </select>
                    </div>
                    <div class="mb-3">
                        <label class="form-label fw-semibold">Commentaire</label>
                        <textarea class="form-control" id="statusOrderComment" rows="2"></textarea>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn" style="background: var(--restaurant-color); color: white;" onclick="updateOrderStatus()">Mettre √† jour</button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL FACTURE -->
    <div class="modal fade" id="invoiceModal" tabindex="-1">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--secondary-color);">
                    <h5 class="modal-title text-white">
                        <i class="fas fa-file-invoice me-2" style="color: var(--primary-color);"></i>
                        Facture - H√¥tel Les R√©sidences du Lawmar
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body" style="background: #f8f9fa;">
                    <div id="invoiceContent" class="invoice-lawmar"></div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fermer</button>
                    <button type="button" class="btn btn-primary" onclick="downloadInvoicePDF()">
                        <i class="fas fa-download me-2"></i>T√©l√©charger PDF
                    </button>
                    <button type="button" class="btn btn-success" onclick="printInvoice()">
                        <i class="fas fa-print me-2"></i>Imprimer
                    </button>
                    <button type="button" class="btn btn-whatsapp" onclick="shareInvoiceWhatsApp()">
                        <i class="fab fa-whatsapp me-2"></i>Partager WhatsApp
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL CHANGEMENT MOT DE PASSE -->
    <div class="modal fade" id="passwordModal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background: var(--secondary-color); color: white;">
                    <h5 class="modal-title">
                        <i class="fas fa-key me-2" style="color: var(--primary-color);"></i>
                        Changer le mot de passe
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="passwordForm">
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Mot de passe actuel</label>
                            <input type="password" class="form-control" id="currentPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Nouveau mot de passe</label>
                            <input type="password" class="form-control" id="newPassword" required>
                        </div>
                        <div class="mb-3">
                            <label class="form-label fw-semibold">Confirmer le nouveau mot de passe</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Annuler</button>
                    <button type="button" class="btn btn-village" onclick="changePassword()">Changer le mot de passe</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // ============================================
        // H√îTEL LES R√âSIDENCES DU LAWMAR
        // ADMINISTRATION H√îTELI√àRE
        // VERSION SANS DONN√âES D'EXEMPLE
        // ============================================

        // ========== CONFIGURATION ==========
        const LAWMAR_CONFIG = {
            legal: {
                name: "H√îTEL LES R√âSIDENCES DU LAWMAR",
                shortName: "LES R√âSIDENCES DU LAWMAR",
                commune: "Commune de Ndi√©b√®ne Gandiol",
                rc: "SN-STL-20217-B-1703",
                ninea: "006522032",
                emails: ["residencelawmar@gmail.com", "diopelhadji11@gmail.com"],
                phones: ["+221 77 995 20 20", "+221 77 291 72 15"],
                whatsapp: ["221779952020", "221772917215"],
                address: "Ndi√©b√®ne Gandiol, Saint-Louis, S√©n√©gal"
            },
            auth: {
                username: "admin",
                passwordHash: "lawmar_123456",
                sessionDuration: 2 * 60 * 60 * 1000
            }
        };

        // ========== DONN√âES PRINCIPALES (VIDES) ==========
        let appData = {
            currentUser: null,
            clients: [],
            rooms: [
                { id: 1, number: "V101", name: "Villa Lagon", type: "villa", price: 65000, capacity: 4, status: "available", equipments: ["wifi", "tv", "ac", "minibar", "terrasse"], description: "Villa vue jardin avec terrasse privative" },
                { id: 2, number: "V102", name: "Villa Oc√©ane", type: "villa", price: 75000, capacity: 4, status: "available", equipments: ["wifi", "tv", "ac", "minibar", "jacuzzi", "terrasse"], description: "Villa vue mer avec jacuzzi" },
                { id: 3, number: "C201", name: "Chambre Sup√©rieure", type: "superieure", price: 45000, capacity: 2, status: "available", equipments: ["wifi", "tv", "ac", "minibar"], description: "Chambre sup√©rieure vue piscine" },
                { id: 4, number: "C202", name: "Chambre Standard", type: "standard", price: 35000, capacity: 2, status: "available", equipments: ["wifi", "tv", "ac"], description: "Chambre standard confortable" },
                { id: 5, number: "S301", name: "Suite Prestige", type: "suite", price: 95000, capacity: 3, status: "available", equipments: ["wifi", "tv", "ac", "minibar", "salon"], description: "Suite prestige avec salon s√©par√©" }
            ],
            reservations: [], // Vide
            restaurantOrders: [], // Vide
            invoices: [], // Vide
            menuItems: [
                { id: 1, name: "Thi√©bou Dieun", category: "Plat", price: 4500 },
                { id: 2, name: "Yassa Poulet", category: "Plat", price: 4000 },
                { id: 3, name: "Maf√©", category: "Plat", price: 4000 },
                { id: 4, name: "Grillade de poisson", category: "Grillade", price: 5500 },
                { id: 5, name: "Brochettes", category: "Grillade", price: 3500 },
                { id: 6, name: "Salade s√©n√©galaise", category: "Entr√©e", price: 2500 },
                { id: 7, name: "Nems", category: "Entr√©e", price: 2000 },
                { id: 8, name: "Jus de bissap", category: "Boisson", price: 1500 },
                { id: 9, name: "Jus de gingembre", category: "Boisson", price: 1500 },
                { id: 10, name: "Thiakry", category: "Dessert", price: 2000 }
            ],
            settings: { darkMode: false, notifications: true, itemsPerPage: 10 },
            nextId: { client: 1, room: 6, reservation: 1, order: 1, invoice: 1 }
        };

        // ========== VARIABLES GLOBALES ==========
        let isAuthenticated = false;
        let currentInvoiceData = null;
        let currentViewReservationId = null;
        let currentViewOrderId = null;
        let currentMonth = new Date().getMonth();
        let currentYear = new Date().getFullYear();
        let syncInterval = null;

        // ========== FONCTIONS DE S√âCURIT√â ==========
        function hashPassword(password) {
            let hash = 0;
            for (let i = 0; i < password.length; i++) {
                const char = password.charCodeAt(i);
                hash = ((hash << 5) - hash) + char;
                hash = hash & hash;
            }
            return 'lawmar_' + Math.abs(hash).toString(16);
        }

        function verifyPassword(inputPassword, storedHash) {
            return inputPassword === "Lawmar2024!";
        }

        // ========== V√âRIFICATION DE SESSION ==========
        function checkSession() {
            const token = localStorage.getItem('lawmar_token');
            const expiry = localStorage.getItem('lawmar_expiry');
            if (token && expiry) {
                const now = new Date().getTime();
                if (now < parseInt(expiry)) return true;
                else {
                    localStorage.removeItem('lawmar_token');
                    localStorage.removeItem('lawmar_expiry');
                    localStorage.removeItem('lawmar_user');
                }
            }
            return false;
        }

        // ========== SYNCHRONISATION ==========
        function syncAllData(showNotificationMsg = true) {
            console.log('üîÑ SYNCHRONISATION...');
            
            // Simuler l'importation
            if (showNotificationMsg) {
                showNotification(`‚úÖ Synchronisation r√©ussie: ${appData.reservations.length} r√©servation(s), ${appData.restaurantOrders.length} commande(s)`, 'success');
            }
            
            updateAllViews();
            
            return { reservations: appData.reservations.length, orders: appData.restaurantOrders.length };
        }

        // ========== OUVERTURE DES PAGES ==========
        function openChambresPage() {
            saveData();
            window.open('chambres.html', '_blank');
            showNotification('Page chambres ouverte', 'info');
        }

        function openRestaurantPage() {
            saveData();
            window.open('restauration.html', '_blank');
            showNotification('Page restaurant ouverte', 'info');
        }

        // ========== MISE √Ä JOUR DES VUES ==========
        function updateAllViews() {
            updateBadges();
            updateDashboardStats();
            
            if (document.getElementById('reservations-section').classList.contains('active')) {
                loadReservations();
            }
            if (document.getElementById('restaurant-section').classList.contains('active')) {
                loadRestaurantOrders();
            }
            if (document.getElementById('clients-section').classList.contains('active')) {
                loadClients();
            }
            if (document.getElementById('hebergements-section').classList.contains('active')) {
                loadRooms();
            }
            if (document.getElementById('factures-section').classList.contains('active')) {
                loadInvoices();
            }
            
            loadRecentReservations();
            loadRecentOrders();
            loadTodaySummary();
            generateCalendar(currentMonth, currentYear);
        }

        // ========== CHARGEMENT DES R√âSERVATIONS (VIDES) ==========
        function loadReservations(filteredData = null) {
            const tbody = document.getElementById('reservationsTableBody');
            if (!tbody) return;
            
            const data = filteredData || appData.reservations;
            
            if (data.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="10" class="text-center py-5">
                            <i class="fas fa-calendar-times" style="font-size: 3rem; color: #dee2e6;"></i>
                            <h6 class="mt-3 text-muted">Aucune r√©servation</h6>
                            <p class="small text-muted">Synchronisez avec chambres.html pour voir les r√©servations</p>
                            <button class="btn btn-sm btn-primary" onclick="syncAllData()">
                                <i class="fas fa-sync-alt me-1"></i> Synchroniser
                            </button>
                        </td>
                    </tr>
                `;
                updateReservationStats([]);
                return;
            }
            
            tbody.innerHTML = data.map(res => {
                const statusText = getStatusText(res.status);
                const paymentBadge = getPaymentBadge(res.paymentStatus);
                
                return `
                    <tr>
                        <td><strong>${res.reference}</strong></td>
                        <td>
                            ${res.clientName}<br>
                            <small class="text-muted">${res.clientPhone}</small>
                        </td>
                        <td>${res.roomNumber} - ${res.roomName}</td>
                        <td>${formatDate(res.checkIn)}</td>
                        <td>${formatDate(res.checkOut)}</td>
                        <td>${res.nights || '-'}</td>
                        <td><strong class="currency-fcfa">${formatNumber(res.amount || 0)}</strong></td>
                        <td>
                            <span class="status-badge status-${res.status}">${statusText}</span>
                            <br><small>${paymentBadge}</small>
                        </td>
                        <td><span class="badge bg-secondary">Chambres</span></td>
                        <td>
                            <div class="action-group">
                                <button class="btn-action btn-view" onclick="viewReservation(${res.id})" title="Voir">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-action btn-status" onclick="showReservationStatusModal(${res.id})" title="Statut">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                                <button class="btn-action btn-invoice" onclick="generateReservationInvoice(${res.id})" title="Facture">
                                    <i class="fas fa-file-invoice"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            setupPagination(data, 10);
            updateReservationStats(data);
            updateDashboardStats();
        }

        // ========== CHARGEMENT DES COMMANDES RESTAURANT (VIDES) ==========
        function loadRestaurantOrders(filteredData = null) {
            const tbody = document.getElementById('ordersTableBody');
            if (!tbody) return;
            
            const data = filteredData || appData.restaurantOrders;
            
            if (data.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center py-5">
                            <i class="fas fa-utensils" style="font-size: 3rem; color: #dee2e6;"></i>
                            <h6 class="mt-3 text-muted">Aucune commande restaurant</h6>
                            <p class="small text-muted">Synchronisez avec restauration.html pour voir les commandes</p>
                            <button class="btn btn-sm" style="background: var(--restaurant-color); color: white;" onclick="syncAllData()">
                                <i class="fas fa-sync-alt me-1"></i> Synchroniser
                            </button>
                        </td>
                    </tr>
                `;
                updateRestaurantStats([]);
                return;
            }
            
            tbody.innerHTML = data.map(order => {
                const statusText = getOrderStatusText(order.status);
                const typeIcon = {
                    'table': '<i class="fas fa-chair"></i>',
                    'room': '<i class="fas fa-bed"></i>',
                    'takeaway': '<i class="fas fa-shopping-bag"></i>'
                }[order.orderType] || '<i class="fas fa-utensils"></i>';
                
                const typeText = {
                    'table': 'Sur place',
                    'room': 'Service chambre',
                    'takeaway': '√Ä emporter'
                }[order.orderType] || order.orderType;
                
                const itemsCount = order.items ? order.items.reduce((sum, item) => sum + item.quantity, 0) : 1;
                
                // Cr√©er un aper√ßu des articles
                let itemsPreview = '';
                if (order.items && order.items.length > 0) {
                    itemsPreview = '<div class="items-preview">';
                    order.items.slice(0, 2).forEach(item => {
                        itemsPreview += `<div>${item.quantity}x ${item.name}</div>`;
                    });
                    if (order.items.length > 2) {
                        itemsPreview += `<div class="text-muted">+${order.items.length - 2} autre(s)</div>`;
                    }
                    itemsPreview += '</div>';
                }
                
                return `
                    <tr>
                        <td><strong>${order.reference}</strong></td>
                        <td>${formatDateTime(order.orderDate)}</td>
                        <td>
                            ${order.clientName}<br>
                            <small class="text-muted">${order.tableNumber}</small>
                        </td>
                        <td>${typeIcon} ${typeText}</td>
                        <td>
                            ${itemsCount} article(s)
                            ${itemsPreview}
                        </td>
                        <td><strong class="currency-fcfa">${formatNumber(order.total)}</strong></td>
                        <td><span class="status-badge status-${order.status}">${statusText}</span></td>
                        <td>
                            <div class="action-group">
                                <button class="btn-action btn-view" onclick="viewOrder(${order.id})" title="Voir">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-action btn-status" onclick="showOrderStatusModal(${order.id})" title="Statut">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                                <button class="btn-action btn-invoice" onclick="generateOrderInvoice(${order.id})" title="Facture">
                                    <i class="fas fa-file-invoice"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
            
            setupOrdersPagination(data, 10);
            updateRestaurantStats(data);
            updateDashboardStats();
        }

        // ========== FONCTIONS DE PAGINATION ==========
        function setupPagination(data, itemsPerPage = 10) {
            const container = document.getElementById('reservationsPagination');
            if (!container) return;
            
            if (data.length === 0) {
                container.innerHTML = '<nav aria-label="Pagination"><ul class="pagination mb-0"></ul></nav><div class="text-muted">0 √©l√©ment(s)</div>';
                return;
            }
            
            const totalPages = Math.ceil(data.length / itemsPerPage);
            let currentPage = 1;
            
            function renderPage(page) {
                const tbody = document.getElementById('reservationsTableBody');
                if (!tbody) return;
                
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const pageData = data.slice(start, end);
                
                renderReservationsPage(pageData);
                renderPaginationControls(page, totalPages, data.length);
            }
            
            function renderPaginationControls(page, total, totalItems) {
                let html = `<nav aria-label="Pagination"><ul class="pagination mb-0">`;
                html += `<li class="page-item ${page === 1 ? 'disabled' : ''}">
                            <button class="page-link" onclick="changePage(${page - 1})">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                        </li>`;
                
                for (let i = 1; i <= Math.min(5, total); i++) {
                    html += `<li class="page-item ${page === i ? 'active' : ''}">
                                <button class="page-link" onclick="changePage(${i})">${i}</button>
                            </li>`;
                }
                
                if (total > 5) {
                    html += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
                    html += `<li class="page-item ${page === total ? 'active' : ''}">
                                <button class="page-link" onclick="changePage(${total})">${total}</button>
                            </li>`;
                }
                
                html += `<li class="page-item ${page === total ? 'disabled' : ''}">
                            <button class="page-link" onclick="changePage(${page + 1})">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </li></ul></nav>
                        <div class="text-muted">Page ${page} sur ${total} ‚Ä¢ ${totalItems} √©l√©ment(s)</div>`;
                
                container.innerHTML = html;
            }
            
            window.changePage = function(page) {
                if (page >= 1 && page <= totalPages) {
                    currentPage = page;
                    renderPage(page);
                }
            };
            
            renderPage(1);
        }

        function setupOrdersPagination(data, itemsPerPage = 10) {
            const container = document.getElementById('ordersPagination');
            if (!container) return;
            
            if (data.length === 0) {
                container.innerHTML = '<nav aria-label="Pagination"><ul class="pagination mb-0"></ul></nav><div class="text-muted">0 commande(s)</div>';
                return;
            }
            
            const totalPages = Math.ceil(data.length / itemsPerPage);
            let currentPage = 1;
            
            function renderPage(page) {
                const tbody = document.getElementById('ordersTableBody');
                if (!tbody) return;
                
                const start = (page - 1) * itemsPerPage;
                const end = start + itemsPerPage;
                const pageData = data.slice(start, end);
                
                renderOrdersPage(pageData);
                renderOrdersPaginationControls(page, totalPages, data.length);
            }
            
            function renderOrdersPaginationControls(page, total, totalItems) {
                let html = `<nav aria-label="Pagination"><ul class="pagination mb-0">`;
                html += `<li class="page-item ${page === 1 ? 'disabled' : ''}">
                            <button class="page-link" onclick="changeOrdersPage(${page - 1})">
                                <i class="fas fa-chevron-left"></i>
                            </button>
                        </li>`;
                
                for (let i = 1; i <= Math.min(5, total); i++) {
                    html += `<li class="page-item ${page === i ? 'active' : ''}">
                                <button class="page-link" onclick="changeOrdersPage(${i})">${i}</button>
                            </li>`;
                }
                
                if (total > 5) {
                    html += `<li class="page-item disabled"><span class="page-link">...</span></li>`;
                    html += `<li class="page-item ${page === total ? 'active' : ''}">
                                <button class="page-link" onclick="changeOrdersPage(${total})">${total}</button>
                            </li>`;
                }
                
                html += `<li class="page-item ${page === total ? 'disabled' : ''}">
                            <button class="page-link" onclick="changeOrdersPage(${page + 1})">
                                <i class="fas fa-chevron-right"></i>
                            </button>
                        </li></ul></nav>
                        <div class="text-muted">Page ${page} sur ${total} ‚Ä¢ ${totalItems} commande(s)</div>`;
                
                container.innerHTML = html;
            }
            
            window.changeOrdersPage = function(page) {
                if (page >= 1 && page <= totalPages) {
                    currentPage = page;
                    renderPage(page);
                }
            };
            
            renderPage(1);
        }

        function renderReservationsPage(reservations) {
            const tbody = document.getElementById('reservationsTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = reservations.map(res => {
                const statusText = getStatusText(res.status);
                const paymentBadge = getPaymentBadge(res.paymentStatus);
                
                return `
                    <tr>
                        <td><strong>${res.reference}</strong></td>
                        <td>${res.clientName}<br><small>${res.clientPhone}</small></td>
                        <td>${res.roomNumber} - ${res.roomName}</td>
                        <td>${formatDate(res.checkIn)}</td>
                        <td>${formatDate(res.checkOut)}</td>
                        <td>${res.nights || '-'}</td>
                        <td><strong class="currency-fcfa">${formatNumber(res.amount || 0)}</strong></td>
                        <td>
                            <span class="status-badge status-${res.status}">${statusText}</span>
                            <br><small>${paymentBadge}</small>
                        </td>
                        <td>
                            <div class="action-group">
                                <button class="btn-action btn-view" onclick="viewReservation(${res.id})">
                                    <i class="fas fa-eye"></i>
                                </button>
                                <button class="btn-action btn-status" onclick="showReservationStatusModal(${res.id})">
                                    <i class="fas fa-sync-alt"></i>
                                </button>
                                <button class="btn-action btn-invoice" onclick="generateReservationInvoice(${res.id})">
                                    <i class="fas fa-file-invoice"></i>
                                </button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function renderOrdersPage(orders) {
            const tbody = document.getElementById('ordersTableBody');
            if (!tbody) return;
            
            tbody.innerHTML = orders.map(order => {
                const statusText = getOrderStatusText(order.status);
                const typeIcon = {
                    'table': '<i class="fas fa-chair"></i>',
                    'room': '<i class="fas fa-bed"></i>',
                    'takeaway': '<i class="fas fa-shopping-bag"></i>'
                }[order.orderType] || '<i class="fas fa-utensils"></i>';
                
                const typeText = {
                    'table': 'Sur place',
                    'room': 'Service chambre',
                    'takeaway': '√Ä emporter'
                }[order.orderType] || order.orderType;
                
                return `
                    <tr>
                        <td><strong>${order.reference}</strong></td>
                        <td>${formatDateTime(order.orderDate)}</td>
                        <td>${order.clientName}<br><small>${order.tableNumber}</small></td>
                        <td>${typeIcon} ${typeText}</td>
                        <td>${order.items ? order.items.length : 1} article(s)</td>
                        <td><strong class="currency-fcfa">${formatNumber(order.total)}</strong></td>
                        <td><span class="status-badge status-${order.status}">${statusText}</span></td>
                        <td>
                            <div class="action-group">
                                <button class="btn-action btn-view" onclick="viewOrder(${order.id})"><i class="fas fa-eye"></i></button>
                                <button class="btn-action btn-status" onclick="showOrderStatusModal(${order.id})"><i class="fas fa-sync-alt"></i></button>
                                <button class="btn-action btn-invoice" onclick="generateOrderInvoice(${order.id})"><i class="fas fa-file-invoice"></i></button>
                            </div>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        // ========== STATISTIQUES ==========
        function updateReservationStats(reservations) {
            const today = new Date().toISOString().split('T')[0];
            
            document.getElementById('totalReservationsCount').textContent = reservations.length;
            document.getElementById('pendingReservationsCount').textContent = reservations.filter(r => r.status === 'pending').length;
            document.getElementById('confirmedReservationsCount').textContent = reservations.filter(r => r.status === 'confirmed').length;
            document.getElementById('checkedinReservationsCount').textContent = reservations.filter(r => r.status === 'checked-in').length;
            document.getElementById('todayReservationsCount').textContent = reservations.filter(r => r.checkIn === today).length + ' arriv√©e(s)';
        }

        function updateRestaurantStats(orders) {
            const today = new Date().toISOString().split('T')[0];
            const thisMonth = new Date().getMonth();
            const thisYear = new Date().getFullYear();
            
            const todayOrders = orders.filter(o => o.orderDate.split('T')[0] === today);
            const preparingOrders = orders.filter(o => o.status === 'preparing');
            
            const todayRevenue = todayOrders.reduce((sum, o) => sum + (o.total || 0), 0);
            const monthRevenue = orders.filter(o => {
                const d = new Date(o.orderDate);
                return d.getMonth() === thisMonth && d.getFullYear() === thisYear;
            }).reduce((sum, o) => sum + (o.total || 0), 0);
            
            document.getElementById('todayOrdersStat').textContent = todayOrders.length;
            document.getElementById('preparingOrdersStat').textContent = preparingOrders.length;
            document.getElementById('restaurantDailyRevenue').textContent = formatNumber(todayRevenue);
            document.getElementById('restaurantMonthlyRevenue').textContent = formatNumber(monthRevenue);
        }

        // ========== FONCTIONS DASHBOARD ==========
        function loadRecentReservations() {
            const tbody = document.getElementById('recentReservations');
            if (!tbody) return;
            
            if (appData.reservations.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-4 text-muted">
                            <i class="fas fa-calendar-times fa-2x mb-2"></i><br>
                            Aucune r√©servation r√©cente
                        </td>
                    </tr>
                `;
                return;
            }
            
            const recent = appData.reservations.slice(0, 5);
            tbody.innerHTML = recent.map(res => `
                <tr>
                    <td>${res.reference}</td>
                    <td>${res.clientName}</td>
                    <td>${res.roomNumber}</td>
                    <td>${formatDate(res.checkIn)} - ${formatDate(res.checkOut)}</td>
                    <td><span class="status-badge status-${res.status}">${getStatusText(res.status)}</span></td>
                    <td><button class="btn-action btn-view btn-sm" onclick="viewReservation(${res.id})"><i class="fas fa-eye"></i></button></td>
                </tr>
            `).join('');
        }

        function loadRecentOrders() {
            const tbody = document.getElementById('recentOrders');
            if (!tbody) return;
            
            if (appData.restaurantOrders.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-4 text-muted">
                            <i class="fas fa-utensils fa-2x mb-2"></i><br>
                            Aucune commande r√©cente
                        </td>
                    </tr>
                `;
                return;
            }
            
            const recent = appData.restaurantOrders.slice(0, 5);
            tbody.innerHTML = recent.map(order => `
                <tr>
                    <td>${order.reference}</td>
                    <td>${order.clientName}</td>
                    <td>${order.items ? order.items.length : 1} article(s)</td>
                    <td><strong class="currency-fcfa">${formatNumber(order.total)}</strong></td>
                    <td><span class="status-badge status-${order.status}">${getOrderStatusText(order.status)}</span></td>
                    <td><button class="btn-action btn-view btn-sm" onclick="viewOrder(${order.id})"><i class="fas fa-eye"></i></button></td>
                </tr>
            `).join('');
        }

        function loadTodaySummary() {
            const today = new Date().toISOString().split('T')[0];
            
            const arrivals = appData.reservations.filter(r => r.checkIn === today).length;
            const departures = appData.reservations.filter(r => r.checkOut === today).length;
            const todayOrders = appData.restaurantOrders.filter(o => o.orderDate.split('T')[0] === today).length;
            
            const vipCount = appData.reservations.filter(r => {
                if (r.checkIn !== today) return false;
                const client = appData.clients.find(c => c.id === r.clientId);
                return client?.vip;
            }).length;
            
            const todayHotelRevenue = appData.reservations
                .filter(r => r.paymentStatus === 'paid' && r.checkIn <= today && r.checkOut > today)
                .reduce((sum, r) => sum + (r.amount / r.nights || 0), 0);
            
            const todayRestaurantRevenue = appData.restaurantOrders
                .filter(o => o.paymentStatus === 'paid' && o.orderDate.split('T')[0] === today)
                .reduce((sum, o) => sum + (o.total || 0), 0);
            
            document.getElementById('todayArrivalsCount').textContent = arrivals;
            document.getElementById('todayDeparturesCount').textContent = departures;
            document.getElementById('todayOrdersCount').textContent = todayOrders;
            document.getElementById('todayVipCount').textContent = vipCount;
            document.getElementById('dailyRevenue').textContent = formatNumber(Math.round(todayHotelRevenue + todayRestaurantRevenue));
        }

        function updateDashboardStats() {
            const today = new Date().toISOString().split('T')[0];
            
            document.getElementById('todayArrivals').textContent = appData.reservations.filter(r => r.checkIn === today).length;
            
            const totalRooms = appData.rooms.length;
            const todayOccupied = appData.reservations.filter(r => r.checkIn <= today && r.checkOut > today).length;
            document.getElementById('occupancyRate').textContent = totalRooms ? Math.round((todayOccupied / totalRooms) * 100) + '%' : '0%';
            
            document.getElementById('pendingReservations').textContent = appData.reservations.filter(r => r.status === 'pending').length;
            
            const thisMonth = new Date().getMonth();
            const thisYear = new Date().getFullYear();
            
            const monthlyHotelRevenue = appData.reservations
                .filter(r => r.paymentStatus === 'paid' && new Date(r.createdAt).getMonth() === thisMonth && new Date(r.createdAt).getFullYear() === thisYear)
                .reduce((sum, r) => sum + (r.amount || 0), 0);
            
            const monthlyRestaurantRevenue = appData.restaurantOrders
                .filter(o => o.paymentStatus === 'paid' && new Date(o.orderDate).getMonth() === thisMonth && new Date(o.orderDate).getFullYear() === thisYear)
                .reduce((sum, o) => sum + (o.total || 0), 0);
            
            document.getElementById('monthlyRevenue').textContent = formatNumber(monthlyHotelRevenue + monthlyRestaurantRevenue);
            
            updateBadges();
        }

        function updateBadges() {
            document.getElementById('reservation-badge').textContent = appData.reservations.filter(r => r.status === 'pending').length;
            document.getElementById('restaurant-badge').textContent = appData.restaurantOrders.filter(o => o.status === 'pending' || o.status === 'preparing').length;
            document.getElementById('invoice-badge').textContent = appData.invoices.filter(i => i.status !== 'paid').length;
        }

        // ========== FONCTIONS DE VISUALISATION ==========
        function viewReservation(id) {
            const reservation = appData.reservations.find(r => r.id === id);
            if (!reservation) return;
            
            currentViewReservationId = id;
            const client = appData.clients.find(c => c.id === reservation.clientId) || {};
            
            document.getElementById('viewReservationContent').innerHTML = `
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--primary-light);">Client</div>
                                <div class="card-body">
                                    <h6>${reservation.clientName} ${client.vip ? '<span class="badge-vip">VIP</span>' : ''}</h6>
                                    <p class="mb-1"><i class="fas fa-phone me-2"></i>${reservation.clientPhone}</p>
                                    <p class="mb-1"><i class="fas fa-envelope me-2"></i>${client.email || 'Non renseign√©'}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--primary-light);">H√©bergement</div>
                                <div class="card-body">
                                    <h6>${reservation.roomName}</h6>
                                    <p class="mb-1"><i class="fas fa-door-open me-2"></i>N¬∞ ${reservation.roomNumber}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--primary-light);">S√©jour</div>
                                <div class="card-body">
                                    <p class="mb-1"><strong>Arriv√©e:</strong> ${formatDate(reservation.checkIn)}</p>
                                    <p class="mb-1"><strong>D√©part:</strong> ${formatDate(reservation.checkOut)}</p>
                                    <p class="mb-1"><strong>Nuits:</strong> ${reservation.nights}</p>
                                    <p class="mb-1"><strong>Adultes:</strong> ${reservation.adults}, Enfants: ${reservation.children}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--primary-light);">Paiement</div>
                                <div class="card-body">
                                    <p class="mb-1"><strong>Montant:</strong> <span class="currency-fcfa">${formatNumber(reservation.amount)} FCFA</span></p>
                                    <p class="mb-1"><strong>Statut:</strong> <span class="status-badge status-${reservation.status}">${getStatusText(reservation.status)}</span></p>
                                    <p class="mb-1"><strong>Paiement:</strong> ${getPaymentStatusText(reservation.paymentStatus)}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${reservation.notes ? `
                    <div class="row">
                        <div class="col-12">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--primary-light);">Notes</div>
                                <div class="card-body">${reservation.notes}</div>
                            </div>
                        </div>
                    </div>` : ''}
                </div>
            `;
            
            new bootstrap.Modal(document.getElementById('viewReservationModal')).show();
        }

        function viewOrder(id) {
            const order = appData.restaurantOrders.find(o => o.id === id);
            if (!order) return;
            
            currentViewOrderId = id;
            
            let itemsHtml = '';
            if (order.items && order.items.length > 0) {
                itemsHtml = '<table class="table table-sm"><thead><tr><th>Article</th><th>Qt√©</th><th>Prix</th><th>Total</th></tr></thead><tbody>';
                order.items.forEach(item => {
                    itemsHtml += `<tr>
                        <td>${item.name}</td>
                        <td>${item.quantity}</td>
                        <td>${formatNumber(item.price)}</td>
                        <td>${formatNumber(item.price * item.quantity)}</td>
                    </tr>`;
                });
                itemsHtml += '</tbody></table>';
            }
            
            document.getElementById('viewOrderContent').innerHTML = `
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--restaurant-light);">Client</div>
                                <div class="card-body">
                                    <h6>${order.clientName}</h6>
                                    <p class="mb-1"><i class="fas fa-phone me-2"></i>${order.clientPhone}</p>
                                    <p class="mb-1"><i class="fas fa-map-marker-alt me-2"></i>${order.tableNumber}</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--restaurant-light);">D√©tails</div>
                                <div class="card-body">
                                    <p class="mb-1"><strong>R√©f√©rence:</strong> ${order.reference}</p>
                                    <p class="mb-1"><strong>Date:</strong> ${formatDateTime(order.orderDate)}</p>
                                    <p class="mb-1"><strong>Type:</strong> ${getOrderTypeText(order.orderType)}</p>
                                    <p class="mb-1"><strong>Statut:</strong> <span class="status-badge status-${order.status}">${getOrderStatusText(order.status)}</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-12">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--restaurant-light);">Articles</div>
                                <div class="card-body">
                                    ${itemsHtml}
                                    <div class="order-total mt-3">
                                        <strong>Total: ${formatNumber(order.total)} FCFA</strong>
                                        <span class="float-end">${getPaymentBadge(order.paymentStatus)}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    ${order.specialRequests ? `
                    <div class="row">
                        <div class="col-12">
                            <div class="card mb-3">
                                <div class="card-header" style="background: var(--restaurant-light);">Demandes sp√©ciales</div>
                                <div class="card-body">${order.specialRequests}</div>
                            </div>
                        </div>
                    </div>` : ''}
                </div>
            `;
            
            new bootstrap.Modal(document.getElementById('viewOrderModal')).show();
        }

        function showReservationStatusModal(id) {
            const reservation = appData.reservations.find(r => r.id === id);
            if (!reservation) return;
            
            document.getElementById('statusReservationId').value = id;
            document.getElementById('currentStatusReservation').value = getStatusText(reservation.status);
            document.getElementById('newStatusReservation').value = reservation.status;
            document.getElementById('statusReservationComment').value = '';
            
            new bootstrap.Modal(document.getElementById('statusReservationModal')).show();
        }

        function showOrderStatusModal(id) {
            const order = appData.restaurantOrders.find(o => o.id === id);
            if (!order) return;
            
            document.getElementById('statusOrderId').value = id;
            document.getElementById('currentStatusOrder').value = getOrderStatusText(order.status);
            document.getElementById('newStatusOrder').value = order.status;
            document.getElementById('statusOrderComment').value = '';
            
            new bootstrap.Modal(document.getElementById('statusOrderModal')).show();
        }

        function updateReservationStatus() {
            const id = parseInt(document.getElementById('statusReservationId').value);
            const newStatus = document.getElementById('newStatusReservation').value;
            const comment = document.getElementById('statusReservationComment').value;
            
            const reservation = appData.reservations.find(r => r.id === id);
            if (reservation) {
                reservation.status = newStatus;
                saveData();
                loadReservations();
                showNotification(`Statut mis √† jour: ${getStatusText(newStatus)}`, 'success');
                bootstrap.Modal.getInstance(document.getElementById('statusReservationModal')).hide();
            }
        }

        function updateOrderStatus() {
            const id = parseInt(document.getElementById('statusOrderId').value);
            const newStatus = document.getElementById('newStatusOrder').value;
            const comment = document.getElementById('statusOrderComment').value;
            
            const order = appData.restaurantOrders.find(o => o.id === id);
            if (order) {
                order.status = newStatus;
                saveData();
                loadRestaurantOrders();
                showNotification(`Statut mis √† jour: ${getOrderStatusText(newStatus)}`, 'success');
                bootstrap.Modal.getInstance(document.getElementById('statusOrderModal')).hide();
            }
        }

        // ========== FONCTIONS FACTURES ==========
        function generateReservationInvoice(reservationId) {
            const reservation = appData.reservations.find(r => r.id === reservationId);
            if (!reservation) return;
            
            const invoiceNumber = `FAC-${new Date().getFullYear()}-${String(reservation.id).padStart(4, '0')}`;
            
            const invoice = {
                id: appData.invoices.length + 1,
                number: invoiceNumber,
                clientName: reservation.clientName,
                date: new Date().toISOString().split('T')[0],
                type: 'hotel',
                reference: reservation.reference,
                amount: reservation.amount,
                status: reservation.paymentStatus
            };
            appData.invoices.push(invoice);
            saveData();
            
            document.getElementById('invoiceContent').innerHTML = `
                <div class="invoice-lawmar">
                    <div class="invoice-header">
                        <div class="invoice-company">
                            <div class="invoice-company-name"><span>H√îTEL</span> LES R√âSIDENCES DU LAWMAR</div>
                            <div class="invoice-company-details">
                                ${LAWMAR_CONFIG.legal.commune}<br>
                                RC: ${LAWMAR_CONFIG.legal.rc}<br>
                                NINEA: ${LAWMAR_CONFIG.legal.ninea}
                            </div>
                        </div>
                        <div class="invoice-title-section">
                            <div class="invoice-title">FACTURE</div>
                            <div class="invoice-number">N¬∞ ${invoiceNumber}</div>
                        </div>
                    </div>
                    <div class="invoice-client-section">
                        <strong>CLIENT</strong><br>
                        ${reservation.clientName}<br>
                        T√©l: ${reservation.clientPhone}
                    </div>
                    <table class="invoice-table">
                        <thead><tr><th>Description</th><th>Quantit√©</th><th>Prix unitaire</th><th>Total</th></tr></thead>
                        <tbody>
                            <tr>
                                <td>H√©bergement - ${reservation.roomName} (N¬∞ ${reservation.roomNumber})</td>
                                <td>${reservation.nights} nuit(s)</td>
                                <td>${formatNumber(Math.round(reservation.amount / reservation.nights))} FCFA</td>
                                <td>${formatNumber(reservation.amount)} FCFA</td>
                            </tr>
                        </tbody>
                        <tfoot>
                            <tr style="background: var(--primary-color); color: white;">
                                <td colspan="3" style="text-align: right;"><strong>TOTAL:</strong></td>
                                <td><strong>${formatNumber(reservation.amount)} FCFA</strong></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            `;
            
            currentInvoiceData = { number: invoiceNumber, total: reservation.amount, clientName: reservation.clientName };
            new bootstrap.Modal(document.getElementById('invoiceModal')).show();
        }

        function generateOrderInvoice(orderId) {
            const order = appData.restaurantOrders.find(o => o.id === orderId);
            if (!order) return;
            
            const invoiceNumber = `FAC-REST-${new Date().getFullYear()}-${String(order.id).padStart(4, '0')}`;
            
            const invoice = {
                id: appData.invoices.length + 1,
                number: invoiceNumber,
                clientName: order.clientName,
                date: new Date().toISOString().split('T')[0],
                type: 'restaurant',
                reference: order.reference,
                amount: order.total,
                status: order.paymentStatus
            };
            appData.invoices.push(invoice);
            saveData();
            
            let itemsRows = '';
            if (order.items && order.items.length > 0) {
                order.items.forEach(item => {
                    itemsRows += `
                        <tr>
                            <td>${item.name}</td>
                            <td>${item.quantity}</td>
                            <td>${formatNumber(item.price)} FCFA</td>
                            <td>${formatNumber(item.price * item.quantity)} FCFA</td>
                        </tr>
                    `;
                });
            }
            
            document.getElementById('invoiceContent').innerHTML = `
                <div class="invoice-lawmar">
                    <div class="invoice-header">
                        <div class="invoice-company">
                            <div class="invoice-company-name"><span>H√îTEL</span> LES R√âSIDENCES DU LAWMAR</div>
                            <div class="invoice-company-details">
                                Restaurant & Traiteur<br>
                                ${LAWMAR_CONFIG.legal.commune}
                            </div>
                        </div>
                        <div class="invoice-title-section">
                            <div class="invoice-title">FACTURE RESTAURANT</div>
                            <div class="invoice-number">N¬∞ ${invoiceNumber}</div>
                        </div>
                    </div>
                    <div class="invoice-client-section">
                        <strong>CLIENT</strong><br>
                        ${order.clientName}<br>
                        T√©l: ${order.clientPhone}<br>
                        ${order.tableNumber}
                    </div>
                    <table class="invoice-table">
                        <thead><tr><th>Article</th><th>Qt√©</th><th>Prix unitaire</th><th>Total</th></tr></thead>
                        <tbody>
                            ${itemsRows}
                        </tbody>
                        <tfoot>
                            <tr style="background: var(--primary-color); color: white;">
                                <td colspan="3" style="text-align: right;"><strong>TOTAL:</strong></td>
                                <td><strong>${formatNumber(order.total)} FCFA</strong></td>
                            </tr>
                        </tfoot>
                    </table>
                </div>
            `;
            
            currentInvoiceData = { number: invoiceNumber, total: order.total, clientName: order.clientName };
            new bootstrap.Modal(document.getElementById('invoiceModal')).show();
        }

        // ========== FONCTIONS CLIENTS ==========
        function loadClients() {
            const tbody = document.getElementById('clientsTableBody');
            if (!tbody) return;
            
            if (appData.clients.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="8" class="text-center py-5">
                            <i class="fas fa-users" style="font-size: 3rem; color: #dee2e6;"></i>
                            <h6 class="mt-3 text-muted">Aucun client</h6>
                            <p class="small text-muted">Les clients appara√Ætront apr√®s synchronisation</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = appData.clients.map(client => `
                <tr>
                    <td><strong>${client.firstName} ${client.lastName}</strong></td>
                    <td>${client.phone}</td>
                    <td>${client.email || '-'}</td>
                    <td>${client.nationality || 'S√©n√©galaise'}</td>
                    <td><span class="badge bg-primary">${client.stays || 0}</span></td>
                    <td><strong class="currency-fcfa">${formatNumber(client.totalSpent || 0)}</strong></td>
                    <td>${client.vip ? '<span class="badge-vip">VIP</span>' : '-'}</td>
                    <td>
                        <button class="btn-action btn-whatsapp" onclick="whatsappClient('${client.phone}')">
                            <i class="fab fa-whatsapp"></i>
                        </button>
                    </td>
                </tr>
            `).join('');
        }

        // ========== FONCTIONS H√âBERGEMENTS ==========
        function loadRooms() {
            const grid = document.getElementById('roomsGrid');
            if (!grid) return;
            
            grid.innerHTML = appData.rooms.map(room => {
                const statusClass = room.status === 'available' ? 'bg-success' : room.status === 'occupied' ? 'bg-danger' : 'bg-warning';
                const statusText = room.status === 'available' ? 'Disponible' : room.status === 'occupied' ? 'Occup√©e' : 'Maintenance';
                
                const activeReservations = appData.reservations.filter(r => 
                    r.roomId === room.id && 
                    r.status !== 'cancelled' && 
                    r.status !== 'checked-out'
                ).length;
                
                return `
                    <div class="col-md-4 mb-3">
                        <div class="card h-100">
                            <div class="card-header" style="background: ${room.status === 'available' ? '#d4edda' : room.status === 'occupied' ? '#f8d7da' : '#fff3cd'};">
                                <div class="d-flex justify-content-between">
                                    <h6 class="mb-0"><i class="fas fa-bed me-2"></i>${room.number}</h6>
                                    <span class="badge ${statusClass}">${statusText}</span>
                                </div>
                            </div>
                            <div class="card-body">
                                <h6>${room.name}</h6>
                                <p class="small text-muted mb-1">${room.type}</p>
                                <p class="small mb-1"><i class="fas fa-users me-1"></i> ${room.capacity} pers.</p>
                                <p class="small mb-1"><i class="fas fa-tag me-1"></i> ${formatNumber(room.price)} FCFA/nuit</p>
                                ${activeReservations > 0 ? 
                                    `<p class="small mb-0 text-primary"><i class="fas fa-calendar-check me-1"></i> ${activeReservations} r√©servation(s)</p>` : 
                                    ''}
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // ========== FONCTIONS FACTURES ==========
        function loadInvoices() {
            const tbody = document.getElementById('invoicesTableBody');
            if (!tbody) return;
            
            if (appData.invoices.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" class="text-center py-5">
                            <i class="fas fa-file-invoice" style="font-size: 3rem; color: #dee2e6;"></i>
                            <h6 class="mt-3 text-muted">Aucune facture</h6>
                            <p class="small text-muted">G√©n√©rez des factures depuis les r√©servations ou commandes</p>
                        </td>
                    </tr>
                `;
                return;
            }
            
            tbody.innerHTML = appData.invoices.slice(0, 10).map(inv => {
                const typeIcon = inv.type === 'restaurant' ? 'üçΩÔ∏è' : 'üè®';
                return `
                    <tr>
                        <td><strong>${inv.number}</strong> ${typeIcon}</td>
                        <td>${inv.clientName}</td>
                        <td>${formatDate(inv.date)}</td>
                        <td>${inv.type === 'restaurant' ? 'Restaurant' : 'H√¥tel'}</td>
                        <td><strong class="currency-fcfa">${formatNumber(inv.amount)}</strong></td>
                        <td>${inv.status === 'paid' ? '<span class="badge bg-success">Pay√©e</span>' : '<span class="badge bg-warning">En attente</span>'}</td>
                        <td>
                            <button class="btn-action btn-view" onclick="showInvoice(${inv.id})"><i class="fas fa-eye"></i></button>
                        </td>
                    </tr>
                `;
            }).join('');
        }

        function showInvoice(id) {
            const invoice = appData.invoices.find(i => i.id === id);
            if (!invoice) return;
            
            currentInvoiceData = invoice;
            
            if (invoice.type === 'hotel') {
                const reservation = appData.reservations.find(r => r.reference === invoice.reference);
                if (reservation) {
                    generateReservationInvoice(reservation.id);
                }
            } else {
                const order = appData.restaurantOrders.find(o => o.reference === invoice.reference);
                if (order) {
                    generateOrderInvoice(order.id);
                }
            }
        }

        // ========== FONCTIONS CALENDRIER ==========
        function generateCalendar(month, year) {
            const container = document.getElementById('calendarContainer');
            if (!container) return;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const daysInMonth = lastDay.getDate();
            const startingDay = firstDay.getDay();
            
            const monthNames = ['Janvier', 'F√©vrier', 'Mars', 'Avril', 'Mai', 'Juin', 
                               'Juillet', 'Ao√ªt', 'Septembre', 'Octobre', 'Novembre', 'D√©cembre'];
            document.getElementById('currentMonth').textContent = `${monthNames[month]} ${year}`;
            
            let calendarHTML = '<div class="calendar-grid">';
            ['Dim', 'Lun', 'Mar', 'Mer', 'Jeu', 'Ven', 'Sam'].forEach(day => {
                calendarHTML += `<div class="calendar-weekday">${day}</div>`;
            });
            
            for (let i = 0; i < startingDay; i++) {
                calendarHTML += '<div class="calendar-day" style="background: transparent; border: none;"></div>';
            }
            
            const today = new Date();
            for (let day = 1; day <= daysInMonth; day++) {
                const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
                const isToday = day === today.getDate() && month === today.getMonth() && year === today.getFullYear();
                
                const arrivals = appData.reservations.filter(r => r.checkIn === dateStr);
                const departures = appData.reservations.filter(r => r.checkOut === dateStr);
                const restaurantOrders = appData.restaurantOrders.filter(o => o.orderDate.split('T')[0] === dateStr);
                
                let dayClass = 'calendar-day';
                if (isToday) dayClass += ' today';
                
                calendarHTML += `<div class="${dayClass}">`;
                calendarHTML += `<div class="day-number">${day}</div>`;
                
                arrivals.slice(0, 2).forEach(res => {
                    calendarHTML += `<div class="calendar-event arrival" title="Arriv√©e: ${res.clientName}">üè® ${res.clientName.substring(0, 10)}</div>`;
                });
                
                departures.slice(0, 2).forEach(res => {
                    calendarHTML += `<div class="calendar-event departure" title="D√©part: ${res.clientName}">üß≥ ${res.clientName.substring(0, 10)}</div>`;
                });
                
                restaurantOrders.slice(0, 2).forEach(order => {
                    calendarHTML += `<div class="calendar-event restaurant" title="Restaurant: ${order.clientName}">üçΩÔ∏è ${order.clientName.substring(0, 10)}</div>`;
                });
                
                const totalEvents = arrivals.length + departures.length + restaurantOrders.length;
                if (totalEvents > 4) {
                    calendarHTML += `<div class="text-muted small">+${totalEvents - 4} √©v√©nement(s)</div>`;
                }
                
                calendarHTML += '</div>';
            }
            
            calendarHTML += '</div>';
            container.innerHTML = calendarHTML;
        }

        // ========== FONCTIONS UTILITAIRES ==========
        function formatDate(date) {
            if (!date) return '';
            const d = new Date(date);
            return d.toLocaleDateString('fr-FR');
        }

        function formatDateTime(date) {
            if (!date) return '';
            const d = new Date(date);
            return d.toLocaleDateString('fr-FR') + ' ' + d.toLocaleTimeString('fr-FR');
        }

        function formatNumber(num) {
            return new Intl.NumberFormat('fr-FR').format(num || 0);
        }

        function getStatusText(status) {
            const statuses = {
                'pending': 'En attente', 'confirmed': 'Confirm√©e', 'checked-in': 'Check-in',
                'checked-out': 'Check-out', 'cancelled': 'Annul√©e'
            };
            return statuses[status] || status;
        }

        function getOrderStatusText(status) {
            const statuses = {
                'pending': 'En attente', 'preparing': 'En pr√©paration', 'ready': 'Pr√™t',
                'delivered': 'Servi', 'cancelled': 'Annul√©'
            };
            return statuses[status] || status;
        }

        function getOrderTypeText(type) {
            const types = { 'table': 'Sur place', 'room': 'Service chambre', 'takeaway': '√Ä emporter' };
            return types[type] || type;
        }

        function getPaymentBadge(status) {
            const badges = {
                'paid': '<span class="badge bg-success">Pay√©</span>',
                'partial': '<span class="badge bg-warning">Acompte</span>',
                'pending': '<span class="badge bg-danger">Impay√©</span>'
            };
            return badges[status] || '<span class="badge bg-secondary">-</span>';
        }

        function getPaymentStatusText(status) {
            const statuses = { 'paid': '‚úÖ Pay√©', 'pending': '‚è≥ En attente', 'partial': '‚ö†Ô∏è Acompte' };
            return statuses[status] || status;
        }

        function whatsappClient(phone) {
            let cleanNumber = phone.replace(/\s+/g, '').replace('+', '');
            if (!cleanNumber.startsWith('221')) cleanNumber = '221' + cleanNumber;
            window.open(`https://wa.me/${cleanNumber}`, '_blank');
        }

        function applyReservationFilters() {
            const checkIn = document.getElementById('filterCheckin')?.value;
            const checkOut = document.getElementById('filterCheckout')?.value;
            const status = document.getElementById('filterStatus')?.value;
            const client = document.getElementById('filterClient')?.value?.toLowerCase();
            
            let filtered = [...appData.reservations];
            if (checkIn) filtered = filtered.filter(r => r.checkIn === checkIn);
            if (checkOut) filtered = filtered.filter(r => r.checkOut === checkOut);
            if (status) filtered = filtered.filter(r => r.status === status);
            if (client) filtered = filtered.filter(r => 
                r.clientName.toLowerCase().includes(client) || 
                r.clientPhone.includes(client)
            );
            
            loadReservations(filtered);
            showNotification(`${filtered.length} r√©servation(s) trouv√©e(s)`, 'info');
        }

        function applyOrderFilters() {
            const date = document.getElementById('filterOrderDate')?.value;
            const status = document.getElementById('filterOrderStatus')?.value;
            const client = document.getElementById('filterOrderClient')?.value?.toLowerCase();
            const type = document.getElementById('filterOrderType')?.value;
            
            let filtered = [...appData.restaurantOrders];
            if (date) filtered = filtered.filter(o => o.orderDate.split('T')[0] === date);
            if (status) filtered = filtered.filter(o => o.status === status);
            if (type) filtered = filtered.filter(o => o.orderType === type);
            if (client) filtered = filtered.filter(o => 
                o.clientName.toLowerCase().includes(client) || 
                o.tableNumber.toLowerCase().includes(client)
            );
            
            loadRestaurantOrders(filtered);
            showNotification(`${filtered.length} commande(s) trouv√©e(s)`, 'info');
        }

        function exportReservations() {
            if (appData.reservations.length === 0) {
                showNotification('Aucune r√©servation √† exporter', 'warning');
                return;
            }
            
            let csv = "R√©f√©rence,Client,T√©l√©phone,H√©bergement,Arriv√©e,D√©part,Nuits,Montant,Statut,Paiement\n";
            appData.reservations.forEach(r => {
                csv += `${r.reference},"${r.clientName}","${r.clientPhone}","${r.roomNumber}",`;
                csv += `${r.checkIn},${r.checkOut},${r.nights},${r.amount},${r.status},${r.paymentStatus}\n`;
            });
            downloadCSV(csv, `reservations-${formatDate(new Date())}.csv`);
        }

        function exportRestaurantOrders() {
            if (appData.restaurantOrders.length === 0) {
                showNotification('Aucune commande √† exporter', 'warning');
                return;
            }
            
            let csv = "R√©f√©rence,Date,Client,T√©l√©phone,Table,Type,Total,Statut\n";
            appData.restaurantOrders.forEach(o => {
                csv += `${o.reference},${o.orderDate},"${o.clientName}","${o.clientPhone}","${o.tableNumber}",`;
                csv += `${o.orderType},${o.total},${o.status}\n`;
            });
            downloadCSV(csv, `commandes-${formatDate(new Date())}.csv`);
        }

        function exportClients() {
            if (appData.clients.length === 0) {
                showNotification('Aucun client √† exporter', 'warning');
                return;
            }
            
            let csv = "Nom,Pr√©nom,T√©l√©phone,Email,Nationalit√©,S√©jours,Total\n";
            appData.clients.forEach(c => {
                csv += `"${c.lastName}","${c.firstName}","${c.phone}","${c.email || ''}","${c.nationality || ''}",`;
                csv += `${c.stays || 0},${c.totalSpent || 0}\n`;
            });
            downloadCSV(csv, `clients-${formatDate(new Date())}.csv`);
        }

        function downloadCSV(csv, filename) {
            const blob = new Blob(["\ufeff" + csv], { type: 'text/csv;charset=utf-8;' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url; a.download = filename;
            document.body.appendChild(a); a.click();
            document.body.removeChild(a); URL.revokeObjectURL(url);
            showNotification('Export r√©ussi', 'success');
        }

        function downloadInvoicePDF() {
            if (!currentInvoiceData) return;
            showNotification('G√©n√©ration PDF...', 'info');
            
            const element = document.getElementById('invoiceContent');
            html2canvas(element, { scale: 2, backgroundColor: '#ffffff' })
                .then(canvas => {
                    const imgData = canvas.toDataURL('image/png');
                    const { jsPDF } = window.jspdf;
                    const pdf = new jsPDF({ orientation: 'portrait', unit: 'mm', format: 'a4' });
                    const imgWidth = 190;
                    const imgHeight = (canvas.height * imgWidth) / canvas.width;
                    pdf.addImage(imgData, 'PNG', 10, 10, imgWidth, imgHeight);
                    pdf.save(`facture-${currentInvoiceData.number}.pdf`);
                    showNotification('PDF g√©n√©r√©', 'success');
                });
        }

        function printInvoice() {
            window.print();
        }

        function shareInvoiceWhatsApp() {
            if (!currentInvoiceData) return;
            const message = `üè® H√îTEL LES R√âSIDENCES DU LAWMAR\n\nFacture: ${currentInvoiceData.number}\nClient: ${currentInvoiceData.clientName}\nMontant: ${formatNumber(currentInvoiceData.total)} FCFA`;
            window.open(`https://wa.me/${LAWMAR_CONFIG.legal.whatsapp[0]}?text=${encodeURIComponent(message)}`, '_blank');
        }

        function showNotification(message, type = 'info', duration = 4000) {
            const alert = document.createElement('div');
            alert.className = `alert alert-${type} alert-dismissible fade show`;
            alert.style.boxShadow = '0 5px 15px rgba(0,0,0,0.2)';
            alert.innerHTML = message + '<button type="button" class="btn-close" data-bs-dismiss="alert"></button>';
            
            document.getElementById('alertContainer').appendChild(alert);
            setTimeout(() => { if (alert.parentNode) alert.remove(); }, duration);
        }

        function debounce(func, wait) {
            let timeout;
            return function(...args) {
                clearTimeout(timeout);
                timeout = setTimeout(() => func.apply(this, args), wait);
            };
        }

        function saveData() {
            localStorage.setItem('lawmar_reservations', JSON.stringify(appData.reservations));
            localStorage.setItem('lawmar_clients', JSON.stringify(appData.clients));
            localStorage.setItem('lawmar_rooms', JSON.stringify(appData.rooms));
            localStorage.setItem('lawmar_restaurant_orders', JSON.stringify(appData.restaurantOrders));
            localStorage.setItem('lawmar_invoices', JSON.stringify(appData.invoices));
        }

        // ========== INITIALISATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            if (checkSession()) {
                const savedUser = localStorage.getItem('lawmar_user');
                if (savedUser) {
                    appData.currentUser = JSON.parse(savedUser);
                    showDashboard();
                } else showLogin();
            } else showLogin();
            
            setupLoginForm();
            loadSavedData();
            
            initComponents();
            
            // Synchronisation automatique
            syncAllData(true);
            
            // Synchronisation p√©riodique toutes les 30 secondes
            if (syncInterval) clearInterval(syncInterval);
            syncInterval = setInterval(() => {
                if (isAuthenticated) {
                    syncAllData(false);
                }
            }, 30000);
        });

        function loadSavedData() {
            const savedReservations = localStorage.getItem('lawmar_reservations');
            const savedClients = localStorage.getItem('lawmar_clients');
            const savedOrders = localStorage.getItem('lawmar_restaurant_orders');
            const savedInvoices = localStorage.getItem('lawmar_invoices');
            
            if (savedReservations) appData.reservations = JSON.parse(savedReservations);
            if (savedClients) appData.clients = JSON.parse(savedClients);
            if (savedOrders) appData.restaurantOrders = JSON.parse(savedOrders);
            if (savedInvoices) appData.invoices = JSON.parse(savedInvoices);
        }

        function setupLoginForm() {
            const loginForm = document.getElementById('loginForm');
            if (loginForm) loginForm.addEventListener('submit', (e) => { e.preventDefault(); handleLogin(); });
            
            const togglePassword = document.getElementById('togglePassword');
            if (togglePassword) {
                togglePassword.addEventListener('click', function() {
                    const passwordInput = document.getElementById('password');
                    const icon = this.querySelector('i');
                    passwordInput.type = passwordInput.type === 'password' ? 'text' : 'password';
                    icon.className = passwordInput.type === 'password' ? 'fas fa-eye' : 'fas fa-eye-slash';
                });
            }
        }

        function handleLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('loginBtn');
            const loginError = document.getElementById('loginError');
            
            if (!username || !password) {
                loginError.textContent = 'Veuillez remplir tous les champs';
                loginError.style.display = 'block';
                return;
            }
            
            loginBtn.disabled = true;
            loginBtn.innerHTML = '<span class="spinner-border spinner-border-sm me-2"></span>Connexion...';
            
            setTimeout(() => {
                if (username === LAWMAR_CONFIG.auth.username && password === "Lawmar2024!") {
                    const token = 'lawmar_' + Date.now();
                    const expiry = new Date().getTime() + LAWMAR_CONFIG.auth.sessionDuration;
                    localStorage.setItem('lawmar_token', token);
                    localStorage.setItem('lawmar_expiry', expiry.toString());
                    
                    const user = { username, name: 'Administrateur', role: 'admin', loginTime: new Date().toISOString() };
                    localStorage.setItem('lawmar_user', JSON.stringify(user));
                    appData.currentUser = user;
                    
                    loginBtn.innerHTML = '<i class="fas fa-check me-2"></i>Connexion r√©ussie!';
                    setTimeout(() => showDashboard(), 500);
                } else {
                    loginError.textContent = 'Identifiants incorrects (admin / Lawmar2024!)';
                    loginError.style.display = 'block';
                    loginBtn.disabled = false;
                    loginBtn.innerHTML = '<i class="fas fa-sign-in-alt me-2"></i>Acc√©der au tableau de bord';
                }
            }, 800);
        }

        function showLogin() {
            document.getElementById('loginOverlay').style.display = 'flex';
            document.getElementById('dashboardPage').style.display = 'none';
            document.getElementById('sidebar').style.display = 'none';
            document.getElementById('mainContent').style.display = 'none';
            isAuthenticated = false;
        }

        function showDashboard() {
            document.getElementById('loginOverlay').style.display = 'none';
            document.getElementById('dashboardPage').style.display = 'block';
            document.getElementById('sidebar').style.display = 'block';
            document.getElementById('mainContent').style.display = 'block';
            isAuthenticated = true;
            
            if (appData.currentUser) {
                document.getElementById('userName').textContent = appData.currentUser.name;
                document.getElementById('navbar-username').textContent = appData.currentUser.name;
            }
            
            initDashboard();
            showNotification('Bienvenue √† H√¥tel Les R√©sidences du Lawmar!', 'success');
        }

        function initComponents() {
            const sidebarToggle = document.getElementById('sidebarToggle');
            if (sidebarToggle) sidebarToggle.addEventListener('click', () => document.getElementById('sidebar').classList.toggle('active'));
            
            document.querySelectorAll('.nav-link[data-section]').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    showSection(section);
                    document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    if (window.innerWidth <= 992) document.getElementById('sidebar').classList.remove('active');
                });
            });
            
            const searchInput = document.getElementById('globalSearch');
            if (searchInput) searchInput.addEventListener('input', debounce(globalSearch, 500));
        }

        function initDashboard() {
            updateDashboardStats();
            loadRecentReservations();
            loadRecentOrders();
            loadTodaySummary();
            generateCalendar(currentMonth, currentYear);
            loadRooms();
            loadInvoices();
        }

        function showSection(sectionId) {
            document.querySelectorAll('.section-content').forEach(section => section.classList.remove('active'));
            const sectionElement = document.getElementById(sectionId + '-section');
            if (sectionElement) sectionElement.classList.add('active');
            
            const titles = {
                'dashboard': 'Tableau de bord', 'reservations': 'R√©servations H√¥tel', 
                'restaurant': 'Commandes Restaurant', 'clients': 'Clients', 
                'hebergements': 'H√©bergements', 'factures': 'Factures', 'calendrier': 'Calendrier'
            };
            
            document.getElementById('current-section').innerHTML = `
                <i class="fas fa-${sectionId === 'restaurant' ? 'utensils' : sectionId === 'reservations' ? 'calendar-check' : 'tachometer-alt'} me-2" style="color: var(--primary-color);"></i>
                ${titles[sectionId] || 'Tableau de bord'} - H√¥tel Les R√©sidences du Lawmar
            `;
            
            switch(sectionId) {
                case 'reservations': loadReservations(); break;
                case 'restaurant': loadRestaurantOrders(); break;
                case 'clients': loadClients(); break;
                case 'hebergements': loadRooms(); break;
                case 'factures': loadInvoices(); break;
                case 'calendrier': generateCalendar(currentMonth, currentYear); break;
            }
        }

        function globalSearch() {
            const query = document.getElementById('globalSearch').value.toLowerCase();
            if (query.length < 2) return;
            
            const results = {
                reservations: appData.reservations.filter(r => 
                    r.reference?.toLowerCase().includes(query) || 
                    r.clientName?.toLowerCase().includes(query) || 
                    r.clientPhone?.includes(query)),
                orders: appData.restaurantOrders.filter(o => 
                    o.reference?.toLowerCase().includes(query) || 
                    o.clientName?.toLowerCase().includes(query) || 
                    o.clientPhone?.includes(query)),
                clients: appData.clients.filter(c => 
                    c.firstName?.toLowerCase().includes(query) || 
                    c.lastName?.toLowerCase().includes(query) || 
                    c.phone?.includes(query))
            };
            
            let message = `üîç R√©sultats pour "${query}"\n\n`;
            if (results.reservations.length) message += `üìÖ R√©servations: ${results.reservations.length}\n`;
            if (results.orders.length) message += `üçΩÔ∏è Commandes: ${results.orders.length}\n`;
            if (results.clients.length) message += `üë§ Clients: ${results.clients.length}\n`;
            if (!results.reservations.length && !results.orders.length && !results.clients.length) {
                message += 'Aucun r√©sultat trouv√©';
            }
            
            showNotification(message, 'info', 5000);
        }

        function prevMonth() { 
            if (--currentMonth < 0) { currentMonth = 11; currentYear--; } 
            generateCalendar(currentMonth, currentYear); 
        }

        function nextMonth() { 
            if (++currentMonth > 11) { currentMonth = 0; currentYear++; } 
            generateCalendar(currentMonth, currentYear); 
        }

        function showChangePasswordModal() {
            new bootstrap.Modal(document.getElementById('passwordModal')).show();
        }

        function changePassword() {
            const newPass = document.getElementById('newPassword').value;
            const confirm = document.getElementById('confirmPassword').value;
            
            if (!newPass || !confirm) {
                showNotification('Champs requis', 'warning');
                return;
            }
            if (newPass !== confirm) {
                showNotification('Mots de passe diff√©rents', 'danger');
                return;
            }
            if (newPass.length < 8) {
                showNotification('8 caract√®res minimum', 'warning');
                return;
            }
            
            showNotification('Mot de passe chang√©', 'success');
            bootstrap.Modal.getInstance(document.getElementById('passwordModal')).hide();
        }

        function logout() {
            if (confirm('D√©connexion ?')) {
                localStorage.removeItem('lawmar_token');
                localStorage.removeItem('lawmar_expiry');
                localStorage.removeItem('lawmar_user');
                appData.currentUser = null;
                isAuthenticated = false;
                
                if (syncInterval) clearInterval(syncInterval);
                
                document.getElementById('dashboardPage').style.display = 'none';
                document.getElementById('sidebar').style.display = 'none';
                document.getElementById('mainContent').style.display = 'none';
                document.getElementById('loginOverlay').style.display = 'flex';
                document.getElementById('loginForm').reset();
                document.getElementById('loginError').style.display = 'none';
                
                showNotification('D√©connexion r√©ussie', 'info');
            }
        }

        // ========== EXPOSITION DES FONCTIONS ==========
        window.showSection = showSection;
        window.viewReservation = viewReservation;
        window.viewOrder = viewOrder;
        window.showReservationStatusModal = showReservationStatusModal;
        window.showOrderStatusModal = showOrderStatusModal;
        window.updateReservationStatus = updateReservationStatus;
        window.updateOrderStatus = updateOrderStatus;
        window.generateReservationInvoice = generateReservationInvoice;
        window.generateOrderInvoice = generateOrderInvoice;
        window.applyReservationFilters = applyReservationFilters;
        window.applyOrderFilters = applyOrderFilters;
        window.exportReservations = exportReservations;
        window.exportRestaurantOrders = exportRestaurantOrders;
        window.exportClients = exportClients;
        window.downloadInvoicePDF = downloadInvoicePDF;
        window.printInvoice = printInvoice;
        window.shareInvoiceWhatsApp = shareInvoiceWhatsApp;
        window.whatsappClient = whatsappClient;
        window.showChangePasswordModal = showChangePasswordModal;
        window.changePassword = changePassword;
        window.logout = logout;
        window.prevMonth = prevMonth;
        window.nextMonth = nextMonth;
        window.syncAllData = syncAllData;
        window.openChambresPage = openChambresPage;
        window.openRestaurantPage = openRestaurantPage;
    </script>
</body>
</html>